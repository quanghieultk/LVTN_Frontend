{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport View from './view';\nimport Viewport from '../viewports/viewport';\nimport { Matrix4 } from 'math.gl';\nimport OrthographicController from '../controllers/orthographic-controller';\nvar viewMatrix = new Matrix4().lookAt({\n  eye: [0, 0, 1]\n});\n\nfunction getProjectionMatrix(_ref) {\n  var width = _ref.width,\n      height = _ref.height,\n      near = _ref.near,\n      far = _ref.far;\n  width = width || 1;\n  height = height || 1;\n  return new Matrix4().ortho({\n    left: -width / 2,\n    right: width / 2,\n    bottom: -height / 2,\n    top: height / 2,\n    near: near,\n    far: far\n  });\n}\n\nvar OrthographicViewport = function (_Viewport) {\n  _inherits(OrthographicViewport, _Viewport);\n\n  var _super = _createSuper(OrthographicViewport);\n\n  function OrthographicViewport(props) {\n    _classCallCheck(this, OrthographicViewport);\n\n    var width = props.width,\n        height = props.height,\n        _props$near = props.near,\n        near = _props$near === void 0 ? 0.1 : _props$near,\n        _props$far = props.far,\n        far = _props$far === void 0 ? 1000 : _props$far,\n        _props$zoom = props.zoom,\n        zoom = _props$zoom === void 0 ? 0 : _props$zoom,\n        _props$target = props.target,\n        target = _props$target === void 0 ? [0, 0, 0] : _props$target,\n        _props$flipY = props.flipY,\n        flipY = _props$flipY === void 0 ? true : _props$flipY;\n    var scale = Math.pow(2, zoom);\n    return _super.call(this, _objectSpread(_objectSpread({}, props), {}, {\n      longitude: null,\n      position: target,\n      viewMatrix: viewMatrix.clone().scale([scale, scale * (flipY ? -1 : 1), scale]),\n      projectionMatrix: getProjectionMatrix({\n        width: width,\n        height: height,\n        near: near,\n        far: far\n      }),\n      zoom: zoom\n    }));\n  }\n\n  return OrthographicViewport;\n}(Viewport);\n\nvar OrthographicView = function (_View) {\n  _inherits(OrthographicView, _View);\n\n  var _super2 = _createSuper(OrthographicView);\n\n  function OrthographicView(props) {\n    _classCallCheck(this, OrthographicView);\n\n    return _super2.call(this, Object.assign({}, props, {\n      type: OrthographicViewport\n    }));\n  }\n\n  _createClass(OrthographicView, [{\n    key: \"controller\",\n    get: function get() {\n      return this._getControllerProps({\n        type: OrthographicController\n      });\n    }\n  }]);\n\n  return OrthographicView;\n}(View);\n\nexport { OrthographicView as default };\nOrthographicView.displayName = 'OrthographicView';","map":{"version":3,"sources":["../../../src/views/orthographic-view.js"],"names":["viewMatrix","eye","width","height","near","far","left","right","bottom","top","OrthographicViewport","Viewport","zoom","target","flipY","props","scale","Math","longitude","position","projectionMatrix","getProjectionMatrix","OrthographicView","View","type","OrthographicController"],"mappings":"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","sourcesContent":["import View from './view';\nimport Viewport from '../viewports/viewport';\n\nimport {Matrix4} from 'math.gl';\nimport OrthographicController from '../controllers/orthographic-controller';\n\nconst viewMatrix = new Matrix4().lookAt({eye: [0, 0, 1]});\n\nfunction getProjectionMatrix({width, height, near, far}) {\n  // Make sure Matrix4.ortho doesn't crash on 0 width/height\n  width = width || 1;\n  height = height || 1;\n\n  return new Matrix4().ortho({\n    left: -width / 2,\n    right: width / 2,\n    bottom: -height / 2,\n    top: height / 2,\n    near,\n    far\n  });\n}\n\nclass OrthographicViewport extends Viewport {\n  constructor(props) {\n    const {\n      width,\n      height,\n      near = 0.1,\n      far = 1000,\n      zoom = 0,\n      target = [0, 0, 0],\n      flipY = true\n    } = props;\n    const scale = Math.pow(2, zoom);\n    super({\n      ...props,\n      // in case viewState contains longitude/latitude values,\n      // make sure that the base Viewport class does not treat this as a geospatial viewport\n      longitude: null,\n      position: target,\n      viewMatrix: viewMatrix.clone().scale([scale, scale * (flipY ? -1 : 1), scale]),\n      projectionMatrix: getProjectionMatrix({width, height, near, far}),\n      zoom\n    });\n  }\n}\n\nexport default class OrthographicView extends View {\n  constructor(props) {\n    super(\n      Object.assign({}, props, {\n        type: OrthographicViewport\n      })\n    );\n  }\n\n  get controller() {\n    return this._getControllerProps({\n      type: OrthographicController\n    });\n  }\n}\n\nOrthographicView.displayName = 'OrthographicView';\n"]},"metadata":{},"sourceType":"module"}