{"ast":null,"code":"import { authHeader } from '../helpers/auth-header';\nimport axios from 'axios';\nexport const userService = {\n  login,\n  logout,\n  register,\n  getAll,\n  getById,\n  updateUser,\n  delete: _delete,\n  changePassword,\n  getInfoUser,\n  follow,\n  changeProfilePicture\n};\n\nfunction login(username, password) {\n  return axios({\n    method: 'post',\n    url: 'http://localhost:8000/api/users/login',\n    data: {\n      \"email\": username,\n      \"password\": password\n    }\n  }).then(handleResponse).then(user => {\n    localStorage.setItem('user', JSON.stringify(user.data));\n    return user;\n  });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem('user');\n}\n\nfunction getAll() {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users`, requestOptions).then(handleResponse);\n}\n\nfunction getById(id) {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n  // const requestOptions = {\n  //     method: 'POST',\n  //     headers: { 'Content-Type': 'application/json' },\n  //     body: JSON.stringify(user)\n  // };\n  return axios.post(`http://localhost:8000/api/users/signup`, user).then(handleResponse);\n}\n\nfunction updateUser(userId, userInfo) {\n  return axios({\n    method: 'patch',\n    url: `http://localhost:8000/api/users/${userId}`,\n    data: {\n      \"firstname\": userInfo.firstname,\n      \"lastname\": userInfo.lastname,\n      \"birthday\": userInfo.birthday,\n      \"address\": userInfo.address,\n      \"email\": userInfo.email\n    }\n  }).then(response => {\n    return response;\n  }, error => {\n    console.log(error);\n    return false;\n  });\n} // prefixed function name with underscore because delete is a reserved word in javascript\n\n\nfunction _delete(id) {\n  const requestOptions = {\n    method: 'DELETE',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  if (!response.status === 200) {\n    if (response.status === 401) {\n      // auto logout if 401 response returned from api\n      logout();\n      window.location.reload(true);\n    }\n\n    const error = response.message;\n    return Promise.reject(error);\n  }\n\n  return response;\n}\n\nfunction changePassword(currentPassword, password, passwordConfirm) {\n  return axios({\n    method: 'patch',\n    url: 'http://localhost:8000/api/users/updatePassword',\n    data: {\n      \"currentPassword\": currentPassword,\n      \"password\": password,\n      \"passwordConfirm\": passwordConfirm\n    },\n    headers: authHeader()\n  }).then(response => {\n    console.log(response);\n\n    if (response.status === 200) {\n      return true;\n    }\n  }, error => {\n    console.log(error);\n    return false;\n  });\n}\n\nfunction getInfoUser(idUser) {\n  let header = authHeader();\n  let config = {\n    headers: header\n  };\n  return axios.get(`http://localhost:8000/api/users/${idUser}`, config).then(res => res).catch(error => console.log(error));\n}\n\nfunction follow(idUser) {\n  return axios({\n    method: 'post',\n    url: 'http://localhost:8000/api/users/followUser',\n    data: {\n      \"userId\": idUser\n    },\n    headers: authHeader()\n  }).then(response => {\n    return response;\n  }, error => {\n    console.log(error);\n  });\n}\n\nfunction changeProfilePicture(data) {\n  let config = {\n    headers: authHeader\n  };\n  return axios.post('http://localhost:8000/api/users/changeProfilePicture', data, config);\n}","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/services/user.service.js"],"names":["authHeader","axios","userService","login","logout","register","getAll","getById","updateUser","delete","_delete","changePassword","getInfoUser","follow","changeProfilePicture","username","password","method","url","data","then","handleResponse","user","localStorage","setItem","JSON","stringify","removeItem","requestOptions","headers","fetch","id","post","userId","userInfo","firstname","lastname","birthday","address","email","response","error","console","log","status","window","location","reload","message","Promise","reject","currentPassword","passwordConfirm","idUser","header","config","get","res","catch"],"mappings":"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","sourcesContent":["import { authHeader } from '../helpers/auth-header';\r\nimport axios from 'axios';\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    updateUser,\r\n    delete: _delete,\r\n    changePassword,\r\n    getInfoUser,\r\n    follow,\r\n    changeProfilePicture\r\n};\r\n\r\nfunction login(username, password) {\r\n    return axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8000/api/users/login',\r\n        data: {\r\n            \"email\": username,\r\n            \"password\": password\r\n        }\r\n    })\r\n        .then(handleResponse)\r\n        .then((user) => {\r\n            localStorage.setItem('user', JSON.stringify(user.data));\r\n            return user;\r\n        })\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    // const requestOptions = {\r\n    //     method: 'POST',\r\n    //     headers: { 'Content-Type': 'application/json' },\r\n    //     body: JSON.stringify(user)\r\n    // };\r\n\r\n    return axios.post(`http://localhost:8000/api/users/signup`, user).then(handleResponse);\r\n}\r\n\r\nfunction updateUser(userId, userInfo) {\r\n    return axios({\r\n        method: 'patch',\r\n        url: `http://localhost:8000/api/users/${userId}`,\r\n        data: {\r\n            \"firstname\": userInfo.firstname,\r\n            \"lastname\": userInfo.lastname,\r\n            \"birthday\": userInfo.birthday,\r\n            \"address\": userInfo.address,\r\n            \"email\": userInfo.email\r\n        }\r\n    })\r\n        .then((response) => {\r\n            return response\r\n        }, (error) => {\r\n            console.log(error);\r\n            return false;\r\n        });\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    if (!response.status === 200) {\r\n        if (response.status === 401) {\r\n            // auto logout if 401 response returned from api\r\n            logout();\r\n            window.location.reload(true);\r\n        }\r\n        const error = response.message;\r\n        return Promise.reject(error);\r\n    }\r\n    return response;\r\n}\r\n\r\nfunction changePassword(currentPassword, password, passwordConfirm) {\r\n\r\n    return axios({\r\n        method: 'patch',\r\n        url: 'http://localhost:8000/api/users/updatePassword',\r\n        data: {\r\n            \"currentPassword\": currentPassword,\r\n            \"password\": password,\r\n            \"passwordConfirm\": passwordConfirm\r\n        },\r\n        headers: authHeader()\r\n    })\r\n        .then((response) => {\r\n            console.log(response);\r\n            if (response.status === 200) {\r\n                return true;\r\n            }\r\n        }, (error) => {\r\n            console.log(error);\r\n            return false;\r\n        });\r\n\r\n}\r\n\r\nfunction getInfoUser(idUser) {\r\n    let header = authHeader();\r\n    let config = {\r\n        headers: header\r\n    }\r\n    return axios.get(`http://localhost:8000/api/users/${idUser}`, config)\r\n        .then(res =>\r\n            res\r\n        )\r\n        .catch(error => console.log(error));\r\n\r\n}\r\nfunction follow(idUser) {\r\n    return axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8000/api/users/followUser',\r\n        data: {\r\n            \"userId\": idUser,\r\n        },\r\n        headers: authHeader()\r\n    })\r\n        .then((response) => {\r\n            return response;\r\n        }, (error) => {\r\n            console.log(error);\r\n        });\r\n}\r\nfunction changeProfilePicture(data) {\r\n    let config={\r\n        headers: authHeader\r\n    }\r\n    return axios.post('http://localhost:8000/api/users/changeProfilePicture',data,config);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}