{"ast":null,"code":"var _jsxFileName = \"D:\\\\LVTN\\\\LVTN\\\\cuisine-net\\\\src\\\\pages\\\\message\\\\MessengerSidePanel.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { chatActions } from \"../actions/chatActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass MessengerSidePanel extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.componentDidMount = () => {\n      const {\n        dispatch\n      } = this.props;\n      dispatch(chatActions.getChatRooms());\n    };\n\n    this.changeRoom = room => {\n      const {\n        dispatch\n      } = this.props;\n      dispatch(chatActions.changeRoom(room));\n    };\n\n    this.handleSearch = e => {\n      const {\n        dispatch,\n        rooms,\n        user: {\n          data\n        }\n      } = this.props;\n      const users = rooms.filter(room => {\n        const user = room.members.filter(member => member._id !== data._id);\n\n        if (user[0].firstName.toLocaleLowerCase().includes(e.target.value.toLocaleLowerCase()) || user[0].lastName.toLocaleLowerCase().includes(e.target.value.toLocaleLowerCase())) {\n          return room;\n        }\n\n        return null;\n      });\n      dispatch(chatActions.searchUsers(users));\n    };\n  }\n\n  render() {\n    const {\n      user,\n      rooms,\n      searchedRooms,\n      roomId\n    } = this.props;\n    let renderRooms = searchedRooms ? searchedRooms : rooms;\n    const usersList = renderRooms.map(room => {\n      const member = room.members.filter(member => member._id !== user.data._id);\n      let message = \"...\";\n\n      if (room.lastMessage[0] && room.lastMessage[0].sender === user.data._id) {\n        if (room.lastMessage[0].messageType === \"text\") {\n          message = \"You: \" + room.lastMessage[0].text;\n        } else {\n          message = \"You sent image \";\n        }\n      } else if (room.lastMessage[0]) {\n        if (room.lastMessage[0].messageType === \"text\") {\n          message = room.lastMessage[0].text;\n        } else {\n          message = \"Image \";\n        }\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: room._id === roomId ? \"contact active\" : \"contact\",\n        onClick: () => this.changeRoom({ ...room,\n          user: { ...member[0]\n          }\n        }),\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: `contact-status ${member[0].activityStatus}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: `/images/profile-picture/100x100/${member[0].profilePicture}`,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"meta\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"name\",\n              children: member[0].firstName + \" \" + member[0].lastName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"preview\",\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, room._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"sidepanel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"profile\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"profile-img\",\n            src: `/images/profile-picture/100x100/${user.data.profilePicture}`,\n            className: \"online\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: user.data.firstName + \" \" + user.data.lastName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-chevron-down expand-button\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"status-options\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                id: \"status-online\",\n                className: \"active\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                id: \"status-offline\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"status-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Offline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"search\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-search\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search contacts...\",\n          onChange: this.handleSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"contacts\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: usersList.length ? usersList : \"No users\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"bottom-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"addcontact\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-user-plus fa-fw\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Add contact\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"settings\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fa fa-cog fa-fw\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Settings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  user: state.user,\n  rooms: state.chat.rooms,\n  searchedRooms: state.chat.searchedRooms,\n  roomId: state.chat.roomId\n});\n\nconst connectedMessengerSidePanel = connect(mapStateToProps)(MessengerSidePanel);\nexport { connectedMessengerSidePanel as MessengerSidePanel };","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/pages/message/MessengerSidePanel.js"],"names":["React","Component","connect","chatActions","MessengerSidePanel","componentDidMount","dispatch","props","getChatRooms","changeRoom","room","handleSearch","e","rooms","user","data","users","filter","members","member","_id","firstName","toLocaleLowerCase","includes","target","value","lastName","searchUsers","render","searchedRooms","roomId","renderRooms","usersList","map","message","lastMessage","sender","messageType","text","activityStatus","profilePicture","length","mapStateToProps","state","chat","connectedMessengerSidePanel"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { chatActions } from \"../actions/chatActions\";\r\n\r\nclass MessengerSidePanel extends Component {\r\n  componentDidMount = () => {\r\n    const { dispatch } = this.props;\r\n    dispatch(chatActions.getChatRooms());\r\n  };\r\n\r\n  changeRoom = room => {\r\n    const { dispatch } = this.props;\r\n    dispatch(chatActions.changeRoom(room));\r\n  };\r\n  //room.members.filter(member => member._id !== user.data._id);\r\n  handleSearch = e => {\r\n    const {\r\n      dispatch,\r\n      rooms,\r\n      user: { data }\r\n    } = this.props;\r\n    const users = rooms.filter(room => {\r\n      const user = room.members.filter(member => member._id !== data._id);\r\n      if (\r\n        user[0].firstName\r\n          .toLocaleLowerCase()\r\n          .includes(e.target.value.toLocaleLowerCase()) ||\r\n        user[0].lastName\r\n          .toLocaleLowerCase()\r\n          .includes(e.target.value.toLocaleLowerCase())\r\n      ) {\r\n        return room;\r\n      }\r\n      return null;\r\n    });\r\n    dispatch(chatActions.searchUsers(users));\r\n  };\r\n\r\n  render() {\r\n    const { user, rooms, searchedRooms, roomId } = this.props;\r\n    let renderRooms = searchedRooms ? searchedRooms : rooms;\r\n    const usersList = renderRooms.map(room => {\r\n      const member = room.members.filter(\r\n        member => member._id !== user.data._id\r\n      );\r\n      let message = \"...\";\r\n      if (room.lastMessage[0] && room.lastMessage[0].sender === user.data._id) {\r\n        if (room.lastMessage[0].messageType === \"text\") {\r\n          message = \"You: \" + room.lastMessage[0].text;\r\n        } else {\r\n          message = \"You sent image \";\r\n        }\r\n      } else if (room.lastMessage[0]) {\r\n        if (room.lastMessage[0].messageType === \"text\") {\r\n          message = room.lastMessage[0].text;\r\n        } else {\r\n          message = \"Image \";\r\n        }\r\n      }\r\n      return (\r\n        <li\r\n          className={room._id === roomId ? \"contact active\" : \"contact\"}\r\n          key={room._id}\r\n          onClick={() => this.changeRoom({ ...room, user: { ...member[0] } })}\r\n        >\r\n          <div className=\"wrap\">\r\n            <span\r\n              className={`contact-status ${member[0].activityStatus}`}\r\n            ></span>\r\n            <img\r\n              src={`/images/profile-picture/100x100/${member[0].profilePicture}`}\r\n              alt=\"\"\r\n            />\r\n            <div className=\"meta\">\r\n              <p className=\"name\">\r\n                {member[0].firstName + \" \" + member[0].lastName}\r\n              </p>\r\n              <p className=\"preview\">{message}</p>\r\n            </div>\r\n          </div>\r\n        </li>\r\n      );\r\n    });\r\n\r\n    return (\r\n      <div id=\"sidepanel\">\r\n        <div id=\"profile\">\r\n          <div className=\"wrap\">\r\n            <img\r\n              id=\"profile-img\"\r\n              src={`/images/profile-picture/100x100/${user.data.profilePicture}`}\r\n              className=\"online\"\r\n              alt=\"\"\r\n            />\r\n            <p>{user.data.firstName + \" \" + user.data.lastName}</p>\r\n            <i\r\n              className=\"fa fa-chevron-down expand-button\"\r\n              aria-hidden=\"true\"\r\n            ></i>\r\n            <div id=\"status-options\">\r\n              <ul>\r\n                <li id=\"status-online\" className=\"active\">\r\n                  <span className=\"status-circle\"></span>\r\n                  <p>Online</p>\r\n                </li>\r\n                <li id=\"status-offline\">\r\n                  <span className=\"status-circle\"></span>\r\n                  <p>Offline</p>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"search\">\r\n          <label htmlFor=\"\">\r\n            <i className=\"fa fa-search\" aria-hidden=\"true\"></i>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search contacts...\"\r\n            onChange={this.handleSearch}\r\n          />\r\n        </div>\r\n        <div id=\"contacts\">\r\n          <ul>{usersList.length ? usersList : \"No users\"}</ul>\r\n        </div>\r\n        <div id=\"bottom-bar\">\r\n          <button id=\"addcontact\">\r\n            <i className=\"fa fa-user-plus fa-fw\" aria-hidden=\"true\"></i>\r\n            <span>Add contact</span>\r\n          </button>\r\n          <button id=\"settings\">\r\n            <i className=\"fa fa-cog fa-fw\" aria-hidden=\"true\"></i>\r\n            <span>Settings</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.user,\r\n  rooms: state.chat.rooms,\r\n  searchedRooms: state.chat.searchedRooms,\r\n  roomId: state.chat.roomId\r\n});\r\n\r\nconst connectedMessengerSidePanel = connect(mapStateToProps)(\r\n  MessengerSidePanel\r\n);\r\nexport { connectedMessengerSidePanel as MessengerSidePanel };\r\n"]},"metadata":{},"sourceType":"module"}