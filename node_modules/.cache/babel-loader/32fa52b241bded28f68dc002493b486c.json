{"ast":null,"code":"import { userConstants } from '../constants/user.constants';\nimport { userService } from '../services/user.service';\nimport { alertActions } from './alert.actions';\nimport { history } from './../helpers/history';\nexport const userActions = {\n  login,\n  logout,\n  register,\n  getAll,\n  changeInfoUser,\n  delete: _delete,\n  getInfoUser\n};\n\nfunction login(username, password, from) {\n  return dispatch => {\n    dispatch(request({\n      username\n    }));\n    userService.login(username, password).then(user => {\n      dispatch(success(user.data));\n      history.push(from);\n    }).catch(error => {\n      dispatch(failure(error.toString()));\n      dispatch(alertActions.error(error.toString()));\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.LOGIN_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.LOGIN_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.LOGIN_FAILURE,\n      error\n    };\n  }\n}\n\nfunction changeInfoUser(userId, userInfo) {\n  return dispatch => {\n    userService.updateUser(userId, userInfo).then(user => {\n      dispatch(success(user.data));\n    }, error => {\n      console.log(error);\n    });\n\n    function success(user) {\n      console.log(user);\n      return {\n        type: userConstants.CHANGE_INFO_USER,\n        user\n      };\n    }\n  };\n}\n\nfunction getInfoUser(userId) {\n  return dispatch => {\n    userService.getInfoUser(userId).then(user => {\n      console.log(user);\n\n      if (user.data.user._id == JSON.parse(localStorage.getItem('user')).data.user._id) {\n        dispatch(success(user.data));\n      }\n    }, error => {\n      console.log(error);\n    });\n\n    function success(user) {\n      console.log(user);\n      return {\n        type: userConstants.GET_USER,\n        user\n      };\n    }\n  };\n}\n\nfunction logout() {\n  userService.logout();\n  history.push('/signIn');\n  return {\n    type: userConstants.LOGOUT\n  };\n}\n\nfunction register(user) {\n  return dispatch => {\n    dispatch(request(user));\n    userService.register(user).then(user => {\n      dispatch(success());\n      history.push('/signIn');\n      dispatch(alertActions.success('Registration successful'));\n    }, error => {\n      console.log(error);\n      dispatch(failure(error.toString()));\n      dispatch(alertActions.error(error.toString()));\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.REGISTER_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.REGISTER_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.REGISTER_FAILURE,\n      error\n    };\n  }\n}\n\nfunction getAll() {\n  return dispatch => {\n    dispatch(request());\n    userService.getAll().then(users => dispatch(success(users)), error => dispatch(failure(error.toString())));\n  };\n\n  function request() {\n    return {\n      type: userConstants.GETALL_REQUEST\n    };\n  }\n\n  function success(users) {\n    return {\n      type: userConstants.GETALL_SUCCESS,\n      users\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.GETALL_FAILURE,\n      error\n    };\n  }\n} // prefixed function name with underscore because delete is a reserved word in javascript\n\n\nfunction _delete(id) {\n  return dispatch => {\n    dispatch(request(id));\n    userService.delete(id).then(user => dispatch(success(id)), error => dispatch(failure(id, error.toString())));\n  };\n\n  function request(id) {\n    return {\n      type: userConstants.DELETE_REQUEST,\n      id\n    };\n  }\n\n  function success(id) {\n    return {\n      type: userConstants.DELETE_SUCCESS,\n      id\n    };\n  }\n\n  function failure(id, error) {\n    return {\n      type: userConstants.DELETE_FAILURE,\n      id,\n      error\n    };\n  }\n}","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/actions/user.actions.js"],"names":["userConstants","userService","alertActions","history","userActions","login","logout","register","getAll","changeInfoUser","delete","_delete","getInfoUser","username","password","from","dispatch","request","then","user","success","data","push","catch","error","failure","toString","type","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","userId","userInfo","updateUser","console","log","CHANGE_INFO_USER","_id","JSON","parse","localStorage","getItem","GET_USER","LOGOUT","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","users","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","id","DELETE_REQUEST","DELETE_SUCCESS","DELETE_FAILURE"],"mappings":"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","sourcesContent":["import { userConstants } from '../constants/user.constants';\r\nimport { userService } from '../services/user.service';\r\nimport { alertActions } from './alert.actions';\r\nimport { history } from './../helpers/history';\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    changeInfoUser,\r\n    delete: _delete,\r\n    getInfoUser\r\n};\r\n\r\nfunction login(username, password, from) {\r\n    return dispatch => {\r\n        dispatch(request({ username }));\r\n        userService.login(username, password)\r\n            .then(\r\n                user => {\r\n                    dispatch(success(user.data));\r\n                    history.push(from);\r\n                }\r\n            ).catch(\r\n                error => {\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\r\n}\r\n\r\nfunction changeInfoUser(userId, userInfo) {\r\n    return dispatch => {\r\n    userService.updateUser(userId, userInfo)\r\n        .then(\r\n            user => {\r\n                dispatch(success(user.data));\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    function success(user) {\r\n        console.log(user);\r\n        return { type: userConstants.CHANGE_INFO_USER, user }\r\n    }\r\n}\r\n}\r\n\r\nfunction getInfoUser(userId) {\r\n    return dispatch => {\r\n    userService.getInfoUser(userId)\r\n        .then(\r\n            user => {\r\n                console.log(user);\r\n                if(user.data.user._id==JSON.parse(localStorage.getItem('user')).data.user._id){\r\n                    dispatch(success(user.data));\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    function success(user) {\r\n        console.log(user);\r\n        return { type: userConstants.GET_USER, user }\r\n    }\r\n}\r\n}\r\n\r\nfunction logout() {\r\n    userService.logout();\r\n    history.push('/signIn');\r\n    return { type: userConstants.LOGOUT };\r\n}\r\n\r\nfunction register(user) {\r\n    return dispatch => {\r\n        dispatch(request(user));\r\n\r\n        userService.register(user)\r\n            .then(\r\n                user => {\r\n                    dispatch(success());\r\n                    history.push('/signIn');\r\n                    dispatch(alertActions.success('Registration successful'));\r\n                },\r\n                error => {\r\n                    console.log(error);\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\r\n}\r\n\r\nfunction getAll() {\r\n    return dispatch => {\r\n        dispatch(request());\r\n\r\n        userService.getAll()\r\n            .then(\r\n                users => dispatch(success(users)),\r\n                error => dispatch(failure(error.toString()))\r\n            );\r\n    };\r\n\r\n    function request() { return { type: userConstants.GETALL_REQUEST } }\r\n    function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }\r\n    function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    return dispatch => {\r\n        dispatch(request(id));\r\n\r\n        userService.delete(id)\r\n            .then(\r\n                user => dispatch(success(id)),\r\n                error => dispatch(failure(id, error.toString()))\r\n            );\r\n    };\r\n\r\n    function request(id) { return { type: userConstants.DELETE_REQUEST, id } }\r\n    function success(id) { return { type: userConstants.DELETE_SUCCESS, id } }\r\n    function failure(id, error) { return { type: userConstants.DELETE_FAILURE, id, error } }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}