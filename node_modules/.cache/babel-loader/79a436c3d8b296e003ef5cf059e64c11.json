{"ast":null,"code":"var _jsxFileName = \"D:\\\\LVTN\\\\LVTN\\\\cuisine-net\\\\src\\\\components\\\\profileTabList\\\\ListReviewRestaurant.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { useSelector } from 'react-redux';\nimport { Rate, Comment, Form, Button, List, Input } from 'antd';\nimport moment from 'moment';\nimport { notification } from 'antd';\nimport { Conversation, Avatar } from \"@chatscope/chat-ui-kit-react\";\nimport { restaurantService } from '../../services/restaurant.service';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles({\n  root: {\n    minWidth: 275\n  }\n});\nexport function ListReviewRestaurant(props) {\n  _s();\n\n  const restaurantId = props.restaurantId;\n  const lillyIco = 'https://chatscope.io/storybook/react/static/media/emily.d34aecd9.svg';\n  const {\n    TextArea\n  } = Input;\n  const [submitting, setSubmitting] = useState(false);\n  const [rateStar, setRateStar] = useState(0);\n  const [message, setMessage] = useState('');\n  const [listReview, setListReview] = useState();\n  useEffect(() => {\n    restaurantService.getReviewByIdRestaurant(restaurantId).then(items => {\n      console.log(items.data.data.restaurant.length);\n      console.log(items.data.data.restaurant.length != 0);\n\n      if (items.data.data.restaurant.length != 0) {\n        setListReview(items.data.data.restaurant[0].userReview);\n      }\n    });\n  }, []);\n\n  const openNotificationWithIcon = (type, mess) => {\n    notification[type]({\n      message: mess,\n      style: {\n        marginTop: 60\n      }\n    });\n  };\n\n  function reviewFunction(value) {\n    setRateStar(value);\n  }\n\n  function handleChange(e) {\n    setMessage(e.target.value);\n  }\n\n  ;\n\n  const handleSubmit = () => {\n    restaurantService.createReviewRestaurant(restaurantId, rateStar, message).then(response => {\n      console.log(response);\n\n      if (response) {\n        openNotificationWithIcon('success', 'Đánh giá nhà hàng thành công!');\n        setMessage('');\n        restaurantService.getReviewByIdRestaurant(restaurantId).then(items => {\n          setListReview(items.data.data.restaurant[0].userReview);\n          setRateStar(0);\n        });\n      } else {\n        openNotificationWithIcon('error', 'Đánh giá nhà hàng thất bại!');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"340px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Comment, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\",\n        alt: \"Han Solo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this),\n      content: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(TextArea, {\n            rows: 4,\n            onChange: handleChange,\n            value: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Rate, {\n          allowHalf: true,\n          autoFocus: true,\n          onChange: reviewFunction,\n          defaultValue: rateStar\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            htmlType: \"submit\",\n            loading: submitting,\n            onClick: handleSubmit,\n            type: \"primary\",\n            children: \"Add Comment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), listReview ? listReview.map(value => {\n      return /*#__PURE__*/_jsxDEV(Conversation, {\n        lastSenderName: \"You\",\n        name: value.user.firstname,\n        info: value.review,\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: value.user.photo,\n          name: value.user.firstname + ' ' + value.user.lastname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Conversation.Operations, {\n          visible: true,\n          children: /*#__PURE__*/_jsxDEV(Rate, {\n            allowHalf: true,\n            disabled: true,\n            autoFocus: true,\n            defaultValue: value.point\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 28\n      }, this);\n    }) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListReviewRestaurant, \"T1+k8bmGmpmEPa4P8OSOGDP6GyQ=\");\n\n_c = ListReviewRestaurant;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListReviewRestaurant\");","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/components/profileTabList/ListReviewRestaurant.js"],"names":["React","useEffect","useState","makeStyles","useSelector","Rate","Comment","Form","Button","List","Input","moment","notification","Conversation","Avatar","restaurantService","useStyles","root","minWidth","ListReviewRestaurant","props","restaurantId","lillyIco","TextArea","submitting","setSubmitting","rateStar","setRateStar","message","setMessage","listReview","setListReview","getReviewByIdRestaurant","then","items","console","log","data","restaurant","length","userReview","openNotificationWithIcon","type","mess","style","marginTop","reviewFunction","value","handleChange","e","target","handleSubmit","createReviewRestaurant","response","height","map","user","firstname","review","photo","lastname","point"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { useSelector } from 'react-redux';\r\nimport { Rate, Comment, Form, Button, List, Input } from 'antd';\r\nimport moment from 'moment';\r\nimport { notification } from 'antd';\r\nimport {\r\n    Conversation,\r\n    Avatar\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nimport { restaurantService } from '../../services/restaurant.service';\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        minWidth: 275,\r\n\r\n    }\r\n});\r\n\r\nexport function ListReviewRestaurant(props) {\r\n    const restaurantId = props.restaurantId;\r\n    const lillyIco = 'https://chatscope.io/storybook/react/static/media/emily.d34aecd9.svg';\r\n    const { TextArea } = Input;\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [rateStar, setRateStar] = useState(0);\r\n    const [message, setMessage] = useState('');\r\n    const [listReview, setListReview] = useState();\r\n    useEffect(() => {\r\n        restaurantService.getReviewByIdRestaurant(restaurantId)\r\n            .then(items => {\r\n                console.log(items.data.data.restaurant.length);\r\n                console.log(items.data.data.restaurant.length!=0);\r\n                if (items.data.data.restaurant.length!=0) {\r\n                    setListReview(items.data.data.restaurant[0].userReview);\r\n                }\r\n            })\r\n    }, []);\r\n    const openNotificationWithIcon = (type, mess) => {\r\n        notification[type]({\r\n            message: mess,\r\n            style: {\r\n                marginTop: 60\r\n            },\r\n        });\r\n    };\r\n    function reviewFunction(value) {\r\n        setRateStar(value);\r\n    }\r\n    function handleChange(e) {\r\n        setMessage(e.target.value);\r\n    };\r\n    const handleSubmit = () => {\r\n        restaurantService.createReviewRestaurant(restaurantId, rateStar, message)\r\n            .then(response => {\r\n                console.log(response);\r\n                if (response) {\r\n\r\n                    openNotificationWithIcon('success', 'Đánh giá nhà hàng thành công!');\r\n                    setMessage('');\r\n\r\n                    restaurantService.getReviewByIdRestaurant(restaurantId)\r\n                        .then(items => {\r\n                            setListReview(items.data.data.restaurant[0].userReview);\r\n                            setRateStar(0);\r\n                        })\r\n                }\r\n                else {\r\n                    openNotificationWithIcon('error', 'Đánh giá nhà hàng thất bại!')\r\n                }\r\n            }\r\n\r\n            )\r\n\r\n\r\n    };\r\n    return (\r\n        <div style={{\r\n            height: \"340px\"\r\n        }}>\r\n            <Comment\r\n                avatar={\r\n                    <Avatar\r\n                        src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\r\n                        alt=\"Han Solo\"\r\n                    />\r\n                }\r\n                content={\r\n                    <>\r\n                        <Form.Item>\r\n                            <TextArea rows={4} onChange={handleChange} value={message} />\r\n                        </Form.Item>\r\n                        <Rate allowHalf autoFocus onChange={reviewFunction} defaultValue={rateStar}></Rate>\r\n                        <Form.Item>\r\n                            <Button htmlType=\"submit\" loading={submitting} onClick={handleSubmit} type=\"primary\">\r\n                                Add Comment\r\n                        </Button>\r\n                        </Form.Item>\r\n                    </>\r\n                }\r\n            />\r\n            {\r\n                listReview ? listReview.map((value) => {\r\n                    return <Conversation lastSenderName=\"You\" name={value.user.firstname} info={value.review}>\r\n                        <Avatar src={value.user.photo} name={value.user.firstname + ' ' + value.user.lastname} />\r\n                        <Conversation.Operations visible>\r\n                            <Rate allowHalf disabled autoFocus defaultValue={value.point}></Rate>\r\n                        </Conversation.Operations>\r\n                    </Conversation>\r\n                }) : null\r\n            }\r\n        </div>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}