{"ast":null,"code":"var _jsxFileName = \"D:\\\\LVTN\\\\LVTN\\\\cuisine-net\\\\src\\\\components\\\\header\\\\Header.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Badge from '@material-ui/core/Badge';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport SearchIcon from '@material-ui/icons/Search';\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\nimport MailOutlinedIcon from '@material-ui/icons/MailOutlined';\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport TabPanel from './../tab/Tab';\nimport Grid from '@material-ui/core/Grid';\nimport DropdownUser from './dropdownUser';\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\nimport { history } from '../../helpers/history';\nimport { notificationActions } from '../../actions/notification.action';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Avatar, CircularProgress, LinearProgress, List, ListItem, ListItemText, Paper, Popover } from '@material-ui/core';\nimport { chatAction } from '../../actions/chat.action';\nimport { Link } from 'react-router-dom';\nimport { notificatonService } from '../../services/notification.service';\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: '80%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: 'inherit'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch'\n    },\n    color: \"black\"\n  },\n  sectionDesktop: {\n    display: 'none',\n    [theme.breakpoints.up('md')]: {\n      display: 'flex'\n    }\n  },\n  sectionMobile: {\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      display: 'none'\n    }\n  },\n  menuDropdown: {\n    height: '600px',\n    top: '30px!important',\n    right: '0px!important'\n  },\n  '@global': {\n    '.MuiAppBar-root': {\n      backgroundColor: 'white'\n    }\n  }\n}));\nexport function Header() {\n  _s();\n\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [anchorElNotification, setAnchorElNotification] = useState(null);\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = useState(null);\n  const [searchKey, setSearchkey] = useState('');\n  const dispatch = useDispatch();\n  const isMenuOpen = Boolean(anchorEl);\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n  const open = Boolean(anchorElNotification);\n  const id = open ? 'simple-popover' : undefined;\n  const notification = useSelector(state => state.notification);\n  const user = useSelector(state => state.users);\n\n  const handleProfileMenuOpen = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMobileMenuClose = () => {\n    setMobileMoreAnchorEl(null);\n  };\n\n  const handleMenuClose = () => {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  };\n\n  const handleMobileMenuOpen = event => {\n    setMobileMoreAnchorEl(event.currentTarget);\n  };\n\n  const handleNotificationClose = event => {\n    setAnchorElNotification(null);\n  };\n\n  const handleNotificationMenuOpen = event => {\n    setAnchorElNotification(event.currentTarget);\n  };\n\n  function search(e) {\n    if (e.nativeEvent.key === 'Enter') {\n      history.push(\"/search/\" + searchKey);\n      history.go();\n    }\n\n    ;\n  }\n\n  function changeSearch(event) {\n    setSearchkey(event.target.value);\n  }\n\n  useEffect(() => {\n    dispatch(notificationActions.initNotifications());\n  }, []);\n  const menuId = 'primary-search-account-menu';\n\n  const renderMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    className: classes.menuDropdown,\n    anchorEl: anchorEl,\n    anchorOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    id: menuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'right'\n    },\n    open: isMenuOpen,\n    onClose: handleMenuClose,\n    children: /*#__PURE__*/_jsxDEV(DropdownUser, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n\n  const renderNotification = /*#__PURE__*/_jsxDEV(Popover, {\n    id: id,\n    open: open,\n    anchorEl: anchorElNotification,\n    onClose: handleNotificationClose,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'left'\n    },\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'left'\n    },\n    elevation: 15 // modifiers={{\n    //   flip: {\n    //     enabled: false\n    //   },\n    //   preventOverflow: {\n    //     enabled: true,\n    //     boundariesElement: \"scrollParent\"\n    //   }\n    // }}\n    ,\n    children: /*#__PURE__*/_jsxDEV(List, {\n      id: \"listNotification\",\n      style: {\n        maxHeight: 300,\n        overflow: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n        dataLength: notification.page,\n        next: () => {\n          const lastId = notification.notifications.length;\n          const page = notification.page;\n          dispatch(notificationActions.fetchNotifications({\n            initialFetch: false,\n            lastId\n          }, null, page));\n        },\n        hasMore: true,\n        loader: /*#__PURE__*/_jsxDEV(LinearProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 19\n        }, this),\n        scrollableTarget: \"listNotification\",\n        children: notification.notifications != null && notification.notifications.length != 0 ? notification.notifications.map((ele, index) => {\n          return /*#__PURE__*/_jsxDEV(ListItem, {\n            onClick: () => {\n              dispatch(notificationActions.removeNotification(index));\n              notificatonService.readNotifications(ele._id);\n            },\n            selected: ele.read == false,\n            children: ele.type == \"like_post\" ? /*#__PURE__*/_jsxDEV(Link, {\n              to: {\n                pathname: \"/post/\" + ele.post,\n                state: {\n                  update: ele.post\n                }\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                  src: ele.sender.photo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 23\n                }, this), ele.sender.firstname + \" đã like bài viết của bạn\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 43\n            }, this) : ele.type == 'post_comment' ? /*#__PURE__*/_jsxDEV(Link, {\n              onClick: () => {},\n              to: {\n                pathname: \"/post/\" + ele.post,\n                state: {\n                  update: ele.post\n                }\n              },\n              children: ele.sender.firstname + \" đã bình luận bài viết của bạn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 50\n            }, this) : ele.type == 'follow' ? /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/profile/\" + ele.sender._id,\n              children: ele.sender.firstname + \" đã theo dõi bạn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 46\n            }, this) : ''\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 20\n          }, this);\n        }) : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 5\n  }, this);\n\n  const mobileMenuId = 'primary-search-account-menu-mobile';\n\n  const renderMobileMenu = /*#__PURE__*/_jsxDEV(Menu, {\n    anchorEl: mobileMoreAnchorEl,\n    anchorOrigin: {\n      vertical: 'bottom',\n      horizontal: 'center'\n    },\n    id: mobileMenuId,\n    keepMounted: true,\n    transformOrigin: {\n      vertical: 'top',\n      horizontal: 'center'\n    },\n    open: isMobileMenuOpen,\n    onClose: handleMobileMenuClose,\n    children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"show 4 new mails\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          badgeContent: 4,\n          color: \"secondary\",\n          children: /*#__PURE__*/_jsxDEV(MailOutlinedIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"show 11 new notifications\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(Badge, {\n          badgeContent: 11,\n          color: \"secondary\",\n          children: /*#__PURE__*/_jsxDEV(NotificationsNoneOutlinedIcon, {\n            color: \"primary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Notifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n      onClick: handleProfileMenuOpen,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        \"aria-label\": \"account of current user\",\n        \"aria-controls\": \"primary-search-account-menu\",\n        \"aria-haspopup\": \"true\",\n        color: \"inherit\",\n        children: /*#__PURE__*/_jsxDEV(AccountCircleOutlinedIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.grow,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"fixed\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.search,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.searchIcon,\n                children: /*#__PURE__*/_jsxDEV(SearchIcon, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(OutlinedInput, {\n                classes: {\n                  root: classes.inputRoot,\n                  input: classes.inputInput\n                },\n                inputProps: {\n                  'aria-label': 'search'\n                },\n                onChange: changeSearch,\n                onKeyUp: search\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 6,\n            children: /*#__PURE__*/_jsxDEV(TabPanel, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 3,\n            style: {\n              justifyContent: \"right\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.grow\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.sectionDesktop,\n              style: {\n                flexDirection: \"row-reverse\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"\",\n                color: \"inherit\",\n                onClick: () => {\n                  dispatch(chatAction.resetMessageCount());\n                  history.push(\"/message\");\n                },\n                children: /*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: user.data == undefined ? 0 : user.data.messagesCount,\n                  color: \"secondary\",\n                  children: /*#__PURE__*/_jsxDEV(MailOutlinedIcon, {\n                    color: \"primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 329,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 328,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 324,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-describedby\": id,\n                \"aria-label\": \"\",\n                color: \"inherit\",\n                onClick: handleNotificationMenuOpen,\n                children: /*#__PURE__*/_jsxDEV(Badge, {\n                  badgeContent: notification.allNotificationsCount,\n                  color: \"secondary\",\n                  children: /*#__PURE__*/_jsxDEV(NotificationsNoneOutlinedIcon, {\n                    color: \"primary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                edge: \"end\",\n                \"aria-label\": \"account of current user\",\n                \"aria-controls\": menuId,\n                \"aria-haspopup\": \"true\",\n                onClick: handleProfileMenuOpen,\n                color: \"inherit\",\n                children: /*#__PURE__*/_jsxDEV(AccountCircleOutlinedIcon, {\n                  color: \"primary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.sectionMobile,\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                \"aria-label\": \"show more\",\n                \"aria-controls\": mobileMenuId,\n                \"aria-haspopup\": \"true\",\n                onClick: handleMobileMenuOpen,\n                color: \"inherit\",\n                children: /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 7\n    }, this), renderMobileMenu, renderMenu, renderNotification]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 298,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Header, \"HmcwLnTUbBKyy2/bL92iUiieGSY=\", false, function () {\n  return [useStyles, useDispatch, useSelector, useSelector];\n});\n\n_c = Header;\n\nvar _c;\n\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/components/header/Header.js"],"names":["React","useEffect","useState","fade","makeStyles","AppBar","Toolbar","IconButton","Badge","MenuItem","Menu","SearchIcon","AccountCircleOutlinedIcon","MailOutlinedIcon","NotificationsNoneOutlinedIcon","MoreIcon","TabPanel","Grid","DropdownUser","OutlinedInput","history","notificationActions","useDispatch","useSelector","Avatar","CircularProgress","LinearProgress","List","ListItem","ListItemText","Paper","Popover","chatAction","Link","notificatonService","InfiniteScroll","useStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","backgroundColor","palette","common","white","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","sectionDesktop","sectionMobile","menuDropdown","top","right","Header","classes","anchorEl","setAnchorEl","anchorElNotification","setAnchorElNotification","mobileMoreAnchorEl","setMobileMoreAnchorEl","searchKey","setSearchkey","dispatch","isMenuOpen","Boolean","isMobileMenuOpen","open","id","undefined","notification","state","user","users","handleProfileMenuOpen","event","currentTarget","handleMobileMenuClose","handleMenuClose","handleMobileMenuOpen","handleNotificationClose","handleNotificationMenuOpen","e","nativeEvent","key","push","go","changeSearch","target","value","initNotifications","menuId","renderMenu","vertical","horizontal","renderNotification","maxHeight","overflow","page","lastId","notifications","length","fetchNotifications","initialFetch","map","ele","index","removeNotification","readNotifications","_id","read","type","pathname","post","update","sender","photo","firstname","mobileMenuId","renderMobileMenu","root","input","flexDirection","resetMessageCount","data","messagesCount","allNotificationsCount"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,0BAAjC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,yBAAP,MAAsC,0CAAtC;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,6BAAP,MAA0C,8CAA1C;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,SAASC,mBAAT,QAAoC,mCAApC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,MAAT,EAAiBC,gBAAjB,EAAmCC,cAAnC,EAAmDC,IAAnD,EAAyDC,QAAzD,EAAmEC,YAAnE,EAAiFC,KAAjF,EAAwFC,OAAxF,QAAuG,mBAAvG;AACA,SAASC,UAAT,QAA2B,2BAA3B;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,kBAAT,QAAmC,qCAAnC;AACA,OAAOC,cAAP,MAA2B,iCAA3B;;AACA,MAAMC,SAAS,GAAGhC,UAAU,CAAEiC,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GADiC;AAIvCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,WAAW,EAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd;AADH,GAJ2B;AAOvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,OAAO,EAAE,MADJ;AAEL,KAACP,KAAK,CAACQ,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BF,MAAAA,OAAO,EAAE;AADmB;AAFzB,GAPgC;AAavCG,EAAAA,MAAM,EAAE;AACNC,IAAAA,QAAQ,EAAE,UADJ;AAENC,IAAAA,YAAY,EAAEZ,KAAK,CAACa,KAAN,CAAYD,YAFpB;AAGNE,IAAAA,eAAe,EAAEhD,IAAI,CAACkC,KAAK,CAACe,OAAN,CAAcC,MAAd,CAAqBC,KAAtB,EAA6B,IAA7B,CAHf;AAIN,eAAW;AACTH,MAAAA,eAAe,EAAEhD,IAAI,CAACkC,KAAK,CAACe,OAAN,CAAcC,MAAd,CAAqBC,KAAtB,EAA6B,IAA7B;AADZ,KAJL;AAONb,IAAAA,WAAW,EAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CAPP;AAQNa,IAAAA,UAAU,EAAE,CARN;AASNC,IAAAA,KAAK,EAAE,KATD;AAUN,KAACnB,KAAK,CAACQ,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BS,MAAAA,UAAU,EAAElB,KAAK,CAACK,OAAN,CAAc,CAAd,CADgB;AAE5Bc,MAAAA,KAAK,EAAE;AAFqB;AAVxB,GAb+B;AA4BvCC,EAAAA,UAAU,EAAE;AACVC,IAAAA,OAAO,EAAErB,KAAK,CAACK,OAAN,CAAc,CAAd,EAAiB,CAAjB,CADC;AAEViB,IAAAA,MAAM,EAAE,MAFE;AAGVX,IAAAA,QAAQ,EAAE,UAHA;AAIVY,IAAAA,aAAa,EAAE,MAJL;AAKVhB,IAAAA,OAAO,EAAE,MALC;AAMViB,IAAAA,UAAU,EAAE,QANF;AAOVC,IAAAA,cAAc,EAAE;AAPN,GA5B2B;AAqCvCC,EAAAA,SAAS,EAAE;AACTC,IAAAA,KAAK,EAAE;AADE,GArC4B;AAwCvCC,EAAAA,UAAU,EAAE;AACVP,IAAAA,OAAO,EAAErB,KAAK,CAACK,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CADC;AAEV;AACAwB,IAAAA,WAAW,EAAG,cAAa7B,KAAK,CAACK,OAAN,CAAc,CAAd,CAAiB,KAHlC;AAIVyB,IAAAA,UAAU,EAAE9B,KAAK,CAAC+B,WAAN,CAAkBC,MAAlB,CAAyB,OAAzB,CAJF;AAKVb,IAAAA,KAAK,EAAE,MALG;AAMV,KAACnB,KAAK,CAACQ,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BU,MAAAA,KAAK,EAAE;AADqB,KANpB;AASVQ,IAAAA,KAAK,EAAE;AATG,GAxC2B;AAmDvCM,EAAAA,cAAc,EAAE;AACd1B,IAAAA,OAAO,EAAE,MADK;AAEd,KAACP,KAAK,CAACQ,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BF,MAAAA,OAAO,EAAE;AADmB;AAFhB,GAnDuB;AAyDvC2B,EAAAA,aAAa,EAAE;AACb3B,IAAAA,OAAO,EAAE,MADI;AAEb,KAACP,KAAK,CAACQ,WAAN,CAAkBC,EAAlB,CAAqB,IAArB,CAAD,GAA8B;AAC5BF,MAAAA,OAAO,EAAE;AADmB;AAFjB,GAzDwB;AA+DvC4B,EAAAA,YAAY,EAAE;AACZb,IAAAA,MAAM,EAAE,OADI;AAEZc,IAAAA,GAAG,EAAE,gBAFO;AAGZC,IAAAA,KAAK,EAAE;AAHK,GA/DyB;AAoEvC,aAAW;AACT,uBAAmB;AACjBvB,MAAAA,eAAe,EAAE;AADA;AADV;AApE4B,CAAZ,CAAD,CAA5B;AA2EA,OAAO,SAASwB,MAAT,GAAkB;AAAA;;AACvB,QAAMC,OAAO,GAAGxC,SAAS,EAAzB;AACA,QAAM,CAACyC,QAAD,EAAWC,WAAX,IAA0B5E,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAAC6E,oBAAD,EAAuBC,uBAAvB,IAAkD9E,QAAQ,CAAC,IAAD,CAAhE;AACA,QAAM,CAAC+E,kBAAD,EAAqBC,qBAArB,IAA8ChF,QAAQ,CAAC,IAAD,CAA5D;AACA,QAAM,CAACiF,SAAD,EAAYC,YAAZ,IAA4BlF,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAMmF,QAAQ,GAAG/D,WAAW,EAA5B;AACA,QAAMgE,UAAU,GAAGC,OAAO,CAACV,QAAD,CAA1B;AACA,QAAMW,gBAAgB,GAAGD,OAAO,CAACN,kBAAD,CAAhC;AACA,QAAMQ,IAAI,GAAGF,OAAO,CAACR,oBAAD,CAApB;AACA,QAAMW,EAAE,GAAGD,IAAI,GAAG,gBAAH,GAAsBE,SAArC;AACA,QAAMC,YAAY,GAAGrE,WAAW,CAACsE,KAAK,IAAIA,KAAK,CAACD,YAAhB,CAAhC;AACA,QAAME,IAAI,GAAGvE,WAAW,CAACsE,KAAK,IAAIA,KAAK,CAACE,KAAhB,CAAxB;;AAEA,QAAMC,qBAAqB,GAAIC,KAAD,IAAW;AACvCnB,IAAAA,WAAW,CAACmB,KAAK,CAACC,aAAP,CAAX;AACD,GAFD;;AAKA,QAAMC,qBAAqB,GAAG,MAAM;AAClCjB,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACD,GAFD;;AAIA,QAAMkB,eAAe,GAAG,MAAM;AAC5BtB,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAqB,IAAAA,qBAAqB;AACtB,GAHD;;AAKA,QAAME,oBAAoB,GAAIJ,KAAD,IAAW;AACtCf,IAAAA,qBAAqB,CAACe,KAAK,CAACC,aAAP,CAArB;AACD,GAFD;;AAIA,QAAMI,uBAAuB,GAAIL,KAAD,IAAW;AACzCjB,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACD,GAFD;;AAKA,QAAMuB,0BAA0B,GAAIN,KAAD,IAAW;AAC5CjB,IAAAA,uBAAuB,CAACiB,KAAK,CAACC,aAAP,CAAvB;AACD,GAFD;;AAGA,WAASnD,MAAT,CAAgByD,CAAhB,EAAmB;AACjB,QAAIA,CAAC,CAACC,WAAF,CAAcC,GAAd,KAAsB,OAA1B,EAAmC;AACjCtF,MAAAA,OAAO,CAACuF,IAAR,CAAa,aAAaxB,SAA1B;AACA/D,MAAAA,OAAO,CAACwF,EAAR;AACD;;AAAA;AACF;;AACD,WAASC,YAAT,CAAsBZ,KAAtB,EAA6B;AAC3Bb,IAAAA,YAAY,CAACa,KAAK,CAACa,MAAN,CAAaC,KAAd,CAAZ;AACD;;AACD9G,EAAAA,SAAS,CAAC,MAAM;AACdoF,IAAAA,QAAQ,CAAChE,mBAAmB,CAAC2F,iBAApB,EAAD,CAAR;AACD,GAFQ,EAEN,EAFM,CAAT;AAGA,QAAMC,MAAM,GAAG,6BAAf;;AACA,QAAMC,UAAU,gBAEd,QAAC,IAAD;AACE,IAAA,SAAS,EAAEtC,OAAO,CAACJ,YADrB;AAEE,IAAA,QAAQ,EAAEK,QAFZ;AAGE,IAAA,YAAY,EAAE;AAAEsC,MAAAA,QAAQ,EAAE,KAAZ;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KAHhB;AAIE,IAAA,EAAE,EAAEH,MAJN;AAKE,IAAA,WAAW,MALb;AAME,IAAA,eAAe,EAAE;AAAEE,MAAAA,QAAQ,EAAE,KAAZ;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KANnB;AAOE,IAAA,IAAI,EAAE9B,UAPR;AAQE,IAAA,OAAO,EAAEc,eARX;AAAA,2BAUE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAVF;AAAA;AAAA;AAAA;AAAA,UAFF;;AAiBA,QAAMiB,kBAAkB,gBACtB,QAAC,OAAD;AACE,IAAA,EAAE,EAAE3B,EADN;AAEE,IAAA,IAAI,EAAED,IAFR;AAGE,IAAA,QAAQ,EAAEV,oBAHZ;AAIE,IAAA,OAAO,EAAEuB,uBAJX;AAKE,IAAA,YAAY,EAAE;AACZa,MAAAA,QAAQ,EAAE,QADE;AAEZC,MAAAA,UAAU,EAAE;AAFA,KALhB;AASE,IAAA,eAAe,EAAE;AACfD,MAAAA,QAAQ,EAAE,KADK;AAEfC,MAAAA,UAAU,EAAE;AAFG,KATnB;AAaE,IAAA,SAAS,EAAE,EAbb,CAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;AAAA,2BAwBE,QAAC,IAAD;AAAM,MAAA,EAAE,EAAC,kBAAT;AAA4B,MAAA,KAAK,EAAE;AAAEE,QAAAA,SAAS,EAAE,GAAb;AAAkBC,QAAAA,QAAQ,EAAE;AAA5B,OAAnC;AAAA,6BACE,QAAC,cAAD;AACE,QAAA,UAAU,EAAE3B,YAAY,CAAC4B,IAD3B;AAEE,QAAA,IAAI,EAAE,MAAM;AACV,gBAAMC,MAAM,GAAG7B,YAAY,CAAC8B,aAAb,CAA2BC,MAA1C;AACA,gBAAMH,IAAI,GAAG5B,YAAY,CAAC4B,IAA1B;AACAnC,UAAAA,QAAQ,CAAChE,mBAAmB,CAACuG,kBAApB,CAAuC;AAAEC,YAAAA,YAAY,EAAE,KAAhB;AAAuBJ,YAAAA;AAAvB,WAAvC,EAAwE,IAAxE,EAA8ED,IAA9E,CAAD,CAAR;AACD,SANH;AAOE,QAAA,OAAO,EAAE,IAPX;AAQE,QAAA,MAAM,eAAE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,gBARV;AASE,QAAA,gBAAgB,EAAC,kBATnB;AAAA,kBAWI5B,YAAY,CAAC8B,aAAb,IAA8B,IAA9B,IAAsC9B,YAAY,CAAC8B,aAAb,CAA2BC,MAA3B,IAAqC,CAA5E,GAAiF/B,YAAY,CAAC8B,aAAb,CAA2BI,GAA3B,CAA+B,CAACC,GAAD,EAAMC,KAAN,KAAgB;AAC/H,8BAAO,QAAC,QAAD;AAAsB,YAAA,OAAO,EAAE,MAAM;AAAE3C,cAAAA,QAAQ,CAAChE,mBAAmB,CAAC4G,kBAApB,CAAuCD,KAAvC,CAAD,CAAR;AAAyD9F,cAAAA,kBAAkB,CAACgG,iBAAnB,CAAqCH,GAAG,CAACI,GAAzC;AAA+C,aAA/I;AAAiJ,YAAA,QAAQ,EAAEJ,GAAG,CAACK,IAAJ,IAAY,KAAvK;AAAA,sBAEHL,GAAG,CAACM,IAAJ,IAAY,WAAZ,gBAA0B,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE;AAClCC,gBAAAA,QAAQ,EAAE,WAAWP,GAAG,CAACQ,IADS;AAElC1C,gBAAAA,KAAK,EAAE;AACL2C,kBAAAA,MAAM,EAAET,GAAG,CAACQ;AADP;AAF2B,eAAV;AAAA,qCAMtB;AAAA,wCACE,QAAC,MAAD;AAAQ,kBAAA,GAAG,EAAER,GAAG,CAACU,MAAJ,CAAWC;AAAxB;AAAA;AAAA;AAAA;AAAA,wBADF,EAEKX,GAAG,CAACU,MAAJ,CAAWE,SAAX,GAAuB,2BAF5B;AAAA;AAAA;AAAA;AAAA;AAAA;AANsB;AAAA;AAAA;AAAA;AAAA,oBAA1B,GAkBIZ,GAAG,CAACM,IAAJ,IAAY,cAAZ,gBAA6B,QAAC,IAAD;AAAM,cAAA,OAAO,EAAE,MAAM,CAAG,CAAxB;AAA0B,cAAA,EAAE,EAAE;AAC3DC,gBAAAA,QAAQ,EAAE,WAAWP,GAAG,CAACQ,IADkC;AAE3D1C,gBAAAA,KAAK,EAAE;AACL2C,kBAAAA,MAAM,EAAET,GAAG,CAACQ;AADP;AAFoD,eAA9B;AAAA,wBAO1BR,GAAG,CAACU,MAAJ,CAAWE,SAAX,GAAuB;AAPG;AAAA;AAAA;AAAA;AAAA,oBAA7B,GAUEZ,GAAG,CAACM,IAAJ,IAAY,QAAZ,gBAAuB,QAAC,IAAD;AAAM,cAAA,EAAE,EAAE,cAAcN,GAAG,CAACU,MAAJ,CAAWN,GAAnC;AAAA,wBAEpBJ,GAAG,CAACU,MAAJ,CAAWE,SAAX,GAAuB;AAFH;AAAA;AAAA;AAAA;AAAA,oBAAvB,GAKE;AAnCL,aAAeX,KAAf;AAAA;AAAA;AAAA;AAAA,kBAAP;AAsCD,SAvCiF,CAAjF,GAuCI;AAlDP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAxBF;AAAA;AAAA;AAAA;AAAA,UADF;;AAmFA,QAAMY,YAAY,GAAG,oCAArB;;AACA,QAAMC,gBAAgB,gBACpB,QAAC,IAAD;AAEE,IAAA,QAAQ,EAAE5D,kBAFZ;AAGE,IAAA,YAAY,EAAE;AAAEkC,MAAAA,QAAQ,EAAE,QAAZ;AAAsBC,MAAAA,UAAU,EAAE;AAAlC,KAHhB;AAIE,IAAA,EAAE,EAAEwB,YAJN;AAKE,IAAA,WAAW,MALb;AAME,IAAA,eAAe,EAAE;AAAEzB,MAAAA,QAAQ,EAAE,KAAZ;AAAmBC,MAAAA,UAAU,EAAE;AAA/B,KANnB;AAOE,IAAA,IAAI,EAAE5B,gBAPR;AAQE,IAAA,OAAO,EAAEW,qBARX;AAAA,4BAWE,QAAC,QAAD;AAAA,8BACE,QAAC,UAAD;AAAY,sBAAW,kBAAvB;AAA0C,QAAA,KAAK,EAAC,SAAhD;AAAA,+BACE,QAAC,KAAD;AAAO,UAAA,YAAY,EAAE,CAArB;AAAwB,UAAA,KAAK,EAAC,WAA9B;AAAA,iCACE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAXF,eAmBE,QAAC,QAAD;AAAA,8BACE,QAAC,UAAD;AAAY,sBAAW,2BAAvB;AAAmD,QAAA,KAAK,EAAC,SAAzD;AAAA,+BACE,QAAC,KAAD;AAAO,UAAA,YAAY,EAAE,EAArB;AAAyB,UAAA,KAAK,EAAC,WAA/B;AAAA,iCACE,QAAC,6BAAD;AAA+B,YAAA,KAAK,EAAC;AAArC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAnBF,eA2BE,QAAC,QAAD;AAAU,MAAA,OAAO,EAAEH,qBAAnB;AAAA,8BACE,QAAC,UAAD;AACE,sBAAW,yBADb;AAEE,yBAAc,6BAFhB;AAGE,yBAAc,MAHhB;AAIE,QAAA,KAAK,EAAC,SAJR;AAAA,+BAME,QAAC,yBAAD;AAAA;AAAA;AAAA;AAAA;AANF;AAAA;AAAA;AAAA;AAAA,cADF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATF;AAAA;AAAA;AAAA;AAAA;AAAA,YA3BF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AA0CA,sBACE;AAAK,IAAA,SAAS,EAAEpB,OAAO,CAACtC,IAAxB;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,QAAQ,EAAC,OAAjB;AAAA,6BACE,QAAC,OAAD;AAAA,+BACE,QAAC,IAAD;AAAM,UAAA,SAAS,MAAf;AAAgB,UAAA,OAAO,EAAE,CAAzB;AAAA,kCACE,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAEsC,OAAO,CAAC7B,MAAxB;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAE6B,OAAO,CAACnB,UAAxB;AAAA,uCACE,QAAC,UAAD;AAAY,kBAAA,KAAK,EAAC;AAAlB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE,QAAC,aAAD;AACE,gBAAA,OAAO,EAAE;AACPqF,kBAAAA,IAAI,EAAElE,OAAO,CAACb,SADP;AAEPgF,kBAAAA,KAAK,EAAEnE,OAAO,CAACX;AAFR,iBADX;AAKE,gBAAA,UAAU,EAAE;AAAE,gCAAc;AAAhB,iBALd;AAME,gBAAA,QAAQ,EAAE4C,YANZ;AAOE,gBAAA,OAAO,EAAE9D;AAPX;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAiBE,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAA,mCACE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAjBF,eAoBE,QAAC,IAAD;AAAM,YAAA,IAAI,MAAV;AAAW,YAAA,EAAE,EAAE,CAAf;AAAkB,YAAA,KAAK,EAAE;AAAEe,cAAAA,cAAc,EAAE;AAAlB,aAAzB;AAAA,oCACE;AAAK,cAAA,SAAS,EAAEc,OAAO,CAACtC;AAAxB;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,SAAS,EAAEsC,OAAO,CAACN,cAAxB;AAAwC,cAAA,KAAK,EAAE;AAAE0E,gBAAAA,aAAa,EAAE;AAAjB,eAA/C;AAAA,sCACE,QAAC,UAAD;AAAY,8BAAW,EAAvB;AAA0B,gBAAA,KAAK,EAAC,SAAhC;AAA0C,gBAAA,OAAO,EAAE,MAAM;AACvD3D,kBAAAA,QAAQ,CAACrD,UAAU,CAACiH,iBAAX,EAAD,CAAR;AACA7H,kBAAAA,OAAO,CAACuF,IAAR,CAAa,UAAb;AACD,iBAHD;AAAA,uCAIE,QAAC,KAAD;AAAO,kBAAA,YAAY,EAAEb,IAAI,CAACoD,IAAL,IAAavD,SAAb,GAAyB,CAAzB,GAA6BG,IAAI,CAACoD,IAAL,CAAUC,aAA5D;AAA2E,kBAAA,KAAK,EAAC,WAAjF;AAAA,yCACE,QAAC,gBAAD;AAAkB,oBAAA,KAAK,EAAC;AAAxB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,sBADF,eASE,QAAC,UAAD;AAAY,oCAAkBzD,EAA9B;AAAkC,8BAAW,EAA7C;AAAgD,gBAAA,KAAK,EAAC,SAAtD;AAAgE,gBAAA,OAAO,EAAEa,0BAAzE;AAAA,uCACE,QAAC,KAAD;AAAO,kBAAA,YAAY,EAAEX,YAAY,CAACwD,qBAAlC;AAAyD,kBAAA,KAAK,EAAC,WAA/D;AAAA,yCACE,QAAC,6BAAD;AAA+B,oBAAA,KAAK,EAAC;AAArC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBATF,eAeE,QAAC,UAAD;AACE,gBAAA,IAAI,EAAC,KADP;AAEE,8BAAW,yBAFb;AAGE,iCAAenC,MAHjB;AAIE,iCAAc,MAJhB;AAKE,gBAAA,OAAO,EAAEjB,qBALX;AAME,gBAAA,KAAK,EAAC,SANR;AAAA,uCAQE,QAAC,yBAAD;AAA2B,kBAAA,KAAK,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA;AARF;AAAA;AAAA;AAAA;AAAA,sBAfF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eA4BE;AAAK,cAAA,SAAS,EAAEpB,OAAO,CAACL,aAAxB;AAAA,qCACE,QAAC,UAAD;AACE,8BAAW,WADb;AAEE,iCAAeqE,YAFjB;AAGE,iCAAc,MAHhB;AAIE,gBAAA,OAAO,EAAEvC,oBAJX;AAKE,gBAAA,KAAK,EAAC,SALR;AAAA,uCAOE,QAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA5BF;AAAA;AAAA;AAAA;AAAA;AAAA,kBApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,EAkEGwC,gBAlEH,EAmEG3B,UAnEH,EAoEGG,kBApEH;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAwED;;GA5Qe1C,M;UACEvC,S,EAKCd,W,EAKIC,W,EACRA,W;;;KAZCoD,M","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { fade, makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport AccountCircleOutlinedIcon from '@material-ui/icons/AccountCircleOutlined';\r\nimport MailOutlinedIcon from '@material-ui/icons/MailOutlined';\r\nimport NotificationsNoneOutlinedIcon from '@material-ui/icons/NotificationsNoneOutlined';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport TabPanel from './../tab/Tab';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport DropdownUser from './dropdownUser';\r\nimport OutlinedInput from '@material-ui/core/OutlinedInput';\r\nimport { history } from '../../helpers/history';\r\nimport { notificationActions } from '../../actions/notification.action';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Avatar, CircularProgress, LinearProgress, List, ListItem, ListItemText, Paper, Popover } from '@material-ui/core';\r\nimport { chatAction } from '../../actions/chat.action';\r\nimport { Link } from 'react-router-dom';\r\nimport { notificatonService } from '../../services/notification.service';\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  search: {\r\n    position: 'relative',\r\n    borderRadius: theme.shape.borderRadius,\r\n    backgroundColor: fade(theme.palette.common.white, 0.15),\r\n    '&:hover': {\r\n      backgroundColor: fade(theme.palette.common.white, 0.25),\r\n    },\r\n    marginRight: theme.spacing(2),\r\n    marginLeft: 0,\r\n    width: '80%',\r\n    [theme.breakpoints.up('sm')]: {\r\n      marginLeft: theme.spacing(3),\r\n      width: 'auto',\r\n    },\r\n  },\r\n  searchIcon: {\r\n    padding: theme.spacing(0, 2),\r\n    height: '100%',\r\n    position: 'absolute',\r\n    pointerEvents: 'none',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  inputInput: {\r\n    padding: theme.spacing(1, 1, 1, 0),\r\n    // vertical padding + font size from searchIcon\r\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n    transition: theme.transitions.create('width'),\r\n    width: '100%',\r\n    [theme.breakpoints.up('md')]: {\r\n      width: '20ch',\r\n    },\r\n    color: \"black\"\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('md')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  menuDropdown: {\r\n    height: '600px',\r\n    top: '30px!important',\r\n    right: '0px!important'\r\n  },\r\n  '@global': {\r\n    '.MuiAppBar-root': {\r\n      backgroundColor: 'white'\r\n    }\r\n  }\r\n}));\r\n\r\nexport function Header() {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const [anchorElNotification, setAnchorElNotification] = useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = useState(null);\r\n  const [searchKey, setSearchkey] = useState('');\r\n  const dispatch = useDispatch();\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n  const open = Boolean(anchorElNotification);\r\n  const id = open ? 'simple-popover' : undefined;\r\n  const notification = useSelector(state => state.notification);\r\n  const user = useSelector(state => state.users);\r\n\r\n  const handleProfileMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleMobileMenuOpen = (event) => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleNotificationClose = (event) => {\r\n    setAnchorElNotification(null);\r\n  };\r\n\r\n\r\n  const handleNotificationMenuOpen = (event) => {\r\n    setAnchorElNotification(event.currentTarget);\r\n  };\r\n  function search(e) {\r\n    if (e.nativeEvent.key === 'Enter') {\r\n      history.push(\"/search/\" + searchKey);\r\n      history.go()\r\n    };\r\n  }\r\n  function changeSearch(event) {\r\n    setSearchkey(event.target.value);\r\n  }\r\n  useEffect(() => {\r\n    dispatch(notificationActions.initNotifications())\r\n  }, [])\r\n  const menuId = 'primary-search-account-menu';\r\n  const renderMenu = (\r\n\r\n    <Menu\r\n      className={classes.menuDropdown}\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <DropdownUser></DropdownUser>\r\n\r\n    </Menu>\r\n  );\r\n\r\n  const renderNotification = (\r\n    <Popover\r\n      id={id}\r\n      open={open}\r\n      anchorEl={anchorElNotification}\r\n      onClose={handleNotificationClose}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'left',\r\n      }}\r\n      elevation={15}\r\n    // modifiers={{\r\n    //   flip: {\r\n    //     enabled: false\r\n    //   },\r\n    //   preventOverflow: {\r\n    //     enabled: true,\r\n    //     boundariesElement: \"scrollParent\"\r\n    //   }\r\n    // }}\r\n    >\r\n      <List id=\"listNotification\" style={{ maxHeight: 300, overflow: 'auto' }}>\r\n        <InfiniteScroll\r\n          dataLength={notification.page}\r\n          next={() => {\r\n            const lastId = notification.notifications.length;\r\n            const page = notification.page;\r\n            dispatch(notificationActions.fetchNotifications({ initialFetch: false, lastId }, null, page));\r\n          }}\r\n          hasMore={true}\r\n          loader={<LinearProgress></LinearProgress>}\r\n          scrollableTarget=\"listNotification\"\r\n        >\r\n          {(notification.notifications != null && notification.notifications.length != 0) ? notification.notifications.map((ele, index) => {\r\n            return <ListItem key={index} onClick={() => { dispatch(notificationActions.removeNotification(index)); notificatonService.readNotifications(ele._id) }} selected={ele.read == false}>\r\n              {\r\n                ele.type == \"like_post\" ? <Link to={{\r\n                  pathname: \"/post/\" + ele.post,\r\n                  state: {\r\n                    update: ele.post\r\n                  }\r\n                }}>{\r\n                    <div>\r\n                      <Avatar src={ele.sender.photo} ></Avatar>{\r\n                        (ele.sender.firstname + \" đã like bài viết của bạn\")\r\n                      }\r\n                    </div>\r\n                  }\r\n                  {/* */}\r\n                  {\r\n\r\n                    \r\n                  }\r\n                </Link>\r\n                  : ele.type == 'post_comment' ? <Link onClick={() => { }} to={{\r\n                    pathname: \"/post/\" + ele.post,\r\n                    state: {\r\n                      update: ele.post\r\n                    }\r\n                  }}>\r\n                    {\r\n                      (ele.sender.firstname + \" đã bình luận bài viết của bạn\")\r\n                    }\r\n                  </Link>\r\n                    : ele.type == 'follow' ? <Link to={\"/profile/\" + ele.sender._id}>\r\n                      {\r\n                        (ele.sender.firstname + \" đã theo dõi bạn\")\r\n                      }\r\n                    </Link>\r\n                      : ''\r\n              }\r\n            </ListItem>\r\n          }) : ''}\r\n        </InfiniteScroll>\r\n      </List>\r\n    </Popover>\r\n  )\r\n\r\n\r\n  const mobileMenuId = 'primary-search-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <MailOutlinedIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new notifications\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <NotificationsNoneOutlinedIcon color='primary' />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notifications</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircleOutlinedIcon />\r\n        </IconButton>\r\n        <p>Profile</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar>\r\n          <Grid container spacing={3} >\r\n            <Grid item xs={3}>\r\n              <div className={classes.search}>\r\n                <div className={classes.searchIcon}>\r\n                  <SearchIcon color='primary' />\r\n                </div>\r\n                <OutlinedInput\r\n                  classes={{\r\n                    root: classes.inputRoot,\r\n                    input: classes.inputInput,\r\n                  }}\r\n                  inputProps={{ 'aria-label': 'search' }}\r\n                  onChange={changeSearch}\r\n                  onKeyUp={search}\r\n                />\r\n              </div>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n              <TabPanel></TabPanel>\r\n            </Grid>\r\n            <Grid item xs={3} style={{ justifyContent: \"right\" }}>\r\n              <div className={classes.grow} />\r\n              <div className={classes.sectionDesktop} style={{ flexDirection: \"row-reverse\" }}>\r\n                <IconButton aria-label=\"\" color=\"inherit\" onClick={() => {\r\n                  dispatch(chatAction.resetMessageCount());\r\n                  history.push(\"/message\");\r\n                }}>\r\n                  <Badge badgeContent={user.data == undefined ? 0 : user.data.messagesCount} color=\"secondary\">\r\n                    <MailOutlinedIcon color='primary' />\r\n                  </Badge>\r\n                </IconButton>\r\n                <IconButton aria-describedby={id} aria-label=\"\" color=\"inherit\" onClick={handleNotificationMenuOpen}>\r\n                  <Badge badgeContent={notification.allNotificationsCount} color=\"secondary\">\r\n                    <NotificationsNoneOutlinedIcon color='primary' />\r\n                  </Badge>\r\n\r\n                </IconButton>\r\n                <IconButton\r\n                  edge=\"end\"\r\n                  aria-label=\"account of current user\"\r\n                  aria-controls={menuId}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleProfileMenuOpen}\r\n                  color=\"inherit\"\r\n                >\r\n                  <AccountCircleOutlinedIcon color='primary' />\r\n                </IconButton>\r\n              </div>\r\n              <div className={classes.sectionMobile}>\r\n                <IconButton\r\n                  aria-label=\"show more\"\r\n                  aria-controls={mobileMenuId}\r\n                  aria-haspopup=\"true\"\r\n                  onClick={handleMobileMenuOpen}\r\n                  color=\"inherit\"\r\n                >\r\n                  <MoreIcon />\r\n                </IconButton>\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n      {renderNotification}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}