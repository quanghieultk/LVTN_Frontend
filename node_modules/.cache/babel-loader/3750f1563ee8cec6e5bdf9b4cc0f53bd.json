{"ast":null,"code":"import { userConstants } from '../constants/user.constants';\nimport { userService } from '../services/user.service';\nimport { alertActions } from './alert.actions';\nimport { history } from './../helpers/history';\nexport const userActions = {\n  login,\n  logout,\n  register,\n  getAll,\n  changeInfoUser,\n  delete: _delete,\n  getInfoUser\n};\n\nfunction login(username, password, from) {\n  return dispatch => {\n    dispatch(request({\n      username\n    }));\n    userService.login(username, password).then(user => {\n      dispatch(success(user.data));\n      history.push(from);\n      dispatch(socketActions.connect());\n    }).catch(error => {\n      dispatch(failure(error.toString()));\n      dispatch(alertActions.error(error.toString()));\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.LOGIN_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.LOGIN_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.LOGIN_FAILURE,\n      error\n    };\n  }\n}\n\nfunction changeInfoUser(userId, userInfo) {\n  return dispatch => {\n    userService.updateUser(userId, userInfo).then(user => {\n      dispatch(success(user.data));\n    }, error => {\n      console.log(error);\n    });\n\n    function success(user) {\n      console.log(user);\n      return {\n        type: userConstants.CHANGE_INFO_USER,\n        user\n      };\n    }\n  };\n}\n\nfunction getInfoUser(userId) {\n  return dispatch => {\n    userService.getInfoUser(userId).then(user => {\n      console.log(user);\n\n      if (user != undefined && user.data.data.user._id === JSON.parse(localStorage.getItem('user')).data.user._id) {\n        dispatch(success(user.data));\n      }\n    }, error => {\n      console.log(error);\n    });\n\n    function success(user) {\n      console.log(user);\n      return {\n        type: userConstants.GET_USER,\n        user\n      };\n    }\n  };\n}\n\nfunction logout() {\n  userService.logout();\n  history.push('/signIn');\n  return {\n    type: userConstants.LOGOUT\n  };\n}\n\nfunction register(user) {\n  return dispatch => {\n    dispatch(request(user));\n    userService.register(user).then(user => {\n      dispatch(success());\n      history.push('/signIn');\n      dispatch(alertActions.success('Registration successful'));\n    }, error => {\n      console.log(error);\n      dispatch(failure(error.toString()));\n      dispatch(alertActions.error(error.toString()));\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.REGISTER_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.REGISTER_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.REGISTER_FAILURE,\n      error\n    };\n  }\n}\n\nfunction getAll() {\n  return dispatch => {\n    dispatch(request());\n    userService.getAll().then(users => dispatch(success(users)), error => dispatch(failure(error.toString())));\n  };\n\n  function request() {\n    return {\n      type: userConstants.GETALL_REQUEST\n    };\n  }\n\n  function success(users) {\n    return {\n      type: userConstants.GETALL_SUCCESS,\n      users\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.GETALL_FAILURE,\n      error\n    };\n  }\n} // prefixed function name with underscore because delete is a reserved word in javascript\n\n\nfunction _delete(id) {\n  return dispatch => {\n    dispatch(request(id));\n    userService.delete(id).then(user => dispatch(success(id)), error => dispatch(failure(id, error.toString())));\n  };\n\n  function request(id) {\n    return {\n      type: userConstants.DELETE_REQUEST,\n      id\n    };\n  }\n\n  function success(id) {\n    return {\n      type: userConstants.DELETE_SUCCESS,\n      id\n    };\n  }\n\n  function failure(id, error) {\n    return {\n      type: userConstants.DELETE_FAILURE,\n      id,\n      error\n    };\n  }\n}","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/actions/user.actions.js"],"names":["userConstants","userService","alertActions","history","userActions","login","logout","register","getAll","changeInfoUser","delete","_delete","getInfoUser","username","password","from","dispatch","request","then","user","success","data","push","socketActions","connect","catch","error","failure","toString","type","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","userId","userInfo","updateUser","console","log","CHANGE_INFO_USER","undefined","_id","JSON","parse","localStorage","getItem","GET_USER","LOGOUT","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","users","GETALL_REQUEST","GETALL_SUCCESS","GETALL_FAILURE","id","DELETE_REQUEST","DELETE_SUCCESS","DELETE_FAILURE"],"mappings":"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","sourcesContent":["import { userConstants } from '../constants/user.constants';\r\nimport { userService } from '../services/user.service';\r\nimport { alertActions } from './alert.actions';\r\nimport { history } from './../helpers/history';\r\nexport const userActions = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    changeInfoUser,\r\n    delete: _delete,\r\n    getInfoUser\r\n};\r\n\r\nfunction login(username, password, from) {\r\n    return dispatch => {\r\n        dispatch(request({ username }));\r\n        userService.login(username, password)\r\n            .then(\r\n                user => {\r\n                    dispatch(success(user.data));\r\n                    history.push(from);\r\n                    dispatch(socketActions.connect());\r\n                }\r\n            ).catch(\r\n                error => {\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\r\n}\r\n\r\nfunction changeInfoUser(userId, userInfo) {\r\n    return dispatch => {\r\n    userService.updateUser(userId, userInfo)\r\n        .then(\r\n            user => {\r\n                dispatch(success(user.data));\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    function success(user) {\r\n        console.log(user);\r\n        return { type: userConstants.CHANGE_INFO_USER, user }\r\n    }\r\n}\r\n}\r\n\r\nfunction getInfoUser(userId) {\r\n    return dispatch => {\r\n    userService.getInfoUser(userId)\r\n        .then(\r\n            user => {\r\n                console.log(user);\r\n                if(user!=undefined && user.data.data.user._id===JSON.parse(localStorage.getItem('user')).data.user._id){\r\n                    dispatch(success(user.data));\r\n                }\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    function success(user) {\r\n        console.log(user);\r\n        return { type: userConstants.GET_USER, user }\r\n    }\r\n}\r\n}\r\n\r\nfunction logout() {\r\n    userService.logout();\r\n    history.push('/signIn');\r\n    return { type: userConstants.LOGOUT };\r\n}\r\n\r\nfunction register(user) {\r\n    return dispatch => {\r\n        dispatch(request(user));\r\n\r\n        userService.register(user)\r\n            .then(\r\n                user => {\r\n                    dispatch(success());\r\n                    history.push('/signIn');\r\n                    dispatch(alertActions.success('Registration successful'));\r\n                },\r\n                error => {\r\n                    console.log(error);\r\n                    dispatch(failure(error.toString()));\r\n                    dispatch(alertActions.error(error.toString()));\r\n                }\r\n            );\r\n    };\r\n\r\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\r\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\r\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\r\n}\r\n\r\nfunction getAll() {\r\n    return dispatch => {\r\n        dispatch(request());\r\n\r\n        userService.getAll()\r\n            .then(\r\n                users => dispatch(success(users)),\r\n                error => dispatch(failure(error.toString()))\r\n            );\r\n    };\r\n\r\n    function request() { return { type: userConstants.GETALL_REQUEST } }\r\n    function success(users) { return { type: userConstants.GETALL_SUCCESS, users } }\r\n    function failure(error) { return { type: userConstants.GETALL_FAILURE, error } }\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    return dispatch => {\r\n        dispatch(request(id));\r\n\r\n        userService.delete(id)\r\n            .then(\r\n                user => dispatch(success(id)),\r\n                error => dispatch(failure(id, error.toString()))\r\n            );\r\n    };\r\n\r\n    function request(id) { return { type: userConstants.DELETE_REQUEST, id } }\r\n    function success(id) { return { type: userConstants.DELETE_SUCCESS, id } }\r\n    function failure(id, error) { return { type: userConstants.DELETE_FAILURE, id, error } }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}