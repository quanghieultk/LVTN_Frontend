{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport { Model } from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nvar ModelNode = function (_ScenegraphNode) {\n  _inherits(ModelNode, _ScenegraphNode);\n\n  var _super = _createSuper(ModelNode);\n\n  function ModelNode(gl) {\n    var _this;\n\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ModelNode);\n\n    _this = _super.call(this, props);\n    _this.onBeforeRender = null;\n    _this.AfterRender = null;\n\n    if (gl instanceof Model) {\n      _this.model = gl;\n\n      _this._setModelNodeProps(props);\n    } else {\n      _this.model = new Model(gl, props);\n    }\n\n    _this.managedResources = props.managedResources || [];\n    return _this;\n  }\n\n  _createClass(ModelNode, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      _get(_getPrototypeOf(ModelNode.prototype), \"setProps\", this).call(this, props);\n\n      this._setModelNodeProps(props);\n\n      return this;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {\n      if (this.model) {\n        this.model[\"delete\"]();\n        this.model = null;\n      }\n\n      this.managedResources.forEach(function (resource) {\n        return resource[\"delete\"]();\n      });\n      this.managedResources = [];\n    }\n  }, {\n    key: \"draw\",\n    value: function draw() {\n      var _this$model;\n\n      return (_this$model = this.model).draw.apply(_this$model, arguments);\n    }\n  }, {\n    key: \"setUniforms\",\n    value: function setUniforms() {\n      var _this$model2;\n\n      (_this$model2 = this.model).setUniforms.apply(_this$model2, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"setAttributes\",\n    value: function setAttributes() {\n      var _this$model3;\n\n      (_this$model3 = this.model).setAttributes.apply(_this$model3, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"updateModuleSettings\",\n    value: function updateModuleSettings() {\n      var _this$model4;\n\n      (_this$model4 = this.model).updateModuleSettings.apply(_this$model4, arguments);\n\n      return this;\n    }\n  }, {\n    key: \"_setModelNodeProps\",\n    value: function _setModelNodeProps(props) {\n      this.model.setProps(props);\n    }\n  }]);\n\n  return ModelNode;\n}(ScenegraphNode);\n\nexport { ModelNode as default };","map":{"version":3,"sources":["../../../src/scenegraph/model-node.js"],"names":["ModelNode","ScenegraphNode","props","gl","resource"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAA,KAAA,QAAA,iBAAA;AACA,OAAA,cAAA,MAAA,mBAAA;;IAEqBA,S;;;;;AACnB,WAAA,SAAA,CAAA,EAAA,EAA4B;AAAA,QAAA,KAAA;;AAAA,QAAZE,KAAY,GAAA,SAAA,CAAA,MAAA,GAAA,CAAA,IAAA,SAAA,CAAA,CAAA,CAAA,KAAA,SAAA,GAAA,SAAA,CAAA,CAAA,CAAA,GAAJ,EAAI;;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,SAAA,CAAA;;AAC1B,IAAA,KAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA,CAAA;AAGA,IAAA,KAAA,CAAA,cAAA,GAAA,IAAA;AACA,IAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AAGA,QAAIC,EAAE,YAAN,KAAA,EAAyB;AACvB,MAAA,KAAA,CAAA,KAAA,GAAA,EAAA;;AACA,MAAA,KAAA,CAAA,kBAAA,CAAA,KAAA;AAFF,KAAA,MAGO;AACL,MAAA,KAAA,CAAA,KAAA,GAAa,IAAA,KAAA,CAAA,EAAA,EAAb,KAAa,CAAb;AACD;;AAED,IAAA,KAAA,CAAA,gBAAA,GAAwBD,KAAK,CAALA,gBAAAA,IAAxB,EAAA;AAf0B,WAAA,KAAA;AAgB3B;;;;6BAEQA,K,EAAO;AACd,MAAA,IAAA,CAAA,eAAA,CAAA,SAAA,CAAA,SAAA,CAAA,EAAA,UAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,IAAA,EAAA,KAAA;;AACA,WAAA,kBAAA,CAAA,KAAA;;AACA,aAAA,IAAA;AACD;;;8BAEQ;AACP,UAAI,KAAJ,KAAA,EAAgB;AACd,aAAA,KAAA,CAAA,QAAA;AACA,aAAA,KAAA,GAAA,IAAA;AACD;;AAED,WAAA,gBAAA,CAAA,OAAA,CAA8B,UAAA,QAAA,EAAQ;AAAA,eAAIE,QAAQ,CAAZ,QAAY,CAARA,EAAJ;AAAtC,OAAA;AACA,WAAA,gBAAA,GAAA,EAAA;AACD;;;2BAGa;AAAA,UAAA,WAAA;;AAEZ,aAAO,CAAA,WAAA,GAAA,KAAA,KAAA,EAAA,IAAA,CAAA,KAAA,CAAA,WAAA,EAAP,SAAO,CAAP;AACD;;;kCAEoB;AAAA,UAAA,YAAA;;AACnB,OAAA,YAAA,GAAA,KAAA,KAAA,EAAA,WAAA,CAAA,KAAA,CAAA,YAAA,EAAA,SAAA;;AACA,aAAA,IAAA;AACD;;;oCAEsB;AAAA,UAAA,YAAA;;AACrB,OAAA,YAAA,GAAA,KAAA,KAAA,EAAA,aAAA,CAAA,KAAA,CAAA,YAAA,EAAA,SAAA;;AACA,aAAA,IAAA;AACD;;;2CAE6B;AAAA,UAAA,YAAA;;AAC5B,OAAA,YAAA,GAAA,KAAA,KAAA,EAAA,oBAAA,CAAA,KAAA,CAAA,YAAA,EAAA,SAAA;;AACA,aAAA,IAAA;AACD;;;uCAIkBF,K,EAAO;AACxB,WAAA,KAAA,CAAA,QAAA,CAAA,KAAA;AACD;;;;EA5DoCD,c;;SAAlBD,S","sourcesContent":["import {Model} from '@luma.gl/engine';\nimport ScenegraphNode from './scenegraph-node';\n\nexport default class ModelNode extends ScenegraphNode {\n  constructor(gl, props = {}) {\n    super(props);\n\n    // pverride callbacks to make sure we call them with this\n    this.onBeforeRender = null;\n    this.AfterRender = null;\n\n    // Create new Model or used supplied Model\n    if (gl instanceof Model) {\n      this.model = gl;\n      this._setModelNodeProps(props);\n    } else {\n      this.model = new Model(gl, props);\n    }\n\n    this.managedResources = props.managedResources || [];\n  }\n\n  setProps(props) {\n    super.setProps(props);\n    this._setModelNodeProps(props);\n    return this;\n  }\n\n  delete() {\n    if (this.model) {\n      this.model.delete();\n      this.model = null;\n    }\n\n    this.managedResources.forEach(resource => resource.delete());\n    this.managedResources = [];\n  }\n\n  // Forward node methods\n  draw(...args) {\n    // Return value indicates if something was actually drawn\n    return this.model.draw(...args);\n  }\n\n  setUniforms(...args) {\n    this.model.setUniforms(...args);\n    return this;\n  }\n\n  setAttributes(...args) {\n    this.model.setAttributes(...args);\n    return this;\n  }\n\n  updateModuleSettings(...args) {\n    this.model.updateModuleSettings(...args);\n    return this;\n  }\n\n  // PRIVATE\n\n  _setModelNodeProps(props) {\n    this.model.setProps(props);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}