{"ast":null,"code":"import { authHeader } from '../helpers/auth-header';\nimport axios from 'axios';\nimport { socketActions } from '../actions/socket.action';\nexport const userService = {\n  login,\n  logout,\n  register,\n  getAll,\n  getById,\n  updateUser,\n  delete: _delete,\n  changePassword,\n  getInfoUser,\n  follow,\n  changeProfilePicture,\n  changeBackgroundPicture,\n  getFollwer,\n  getFollwing\n};\n\nfunction login(username, password) {\n  return axios({\n    method: 'post',\n    url: 'http://localhost:8000/api/users/login',\n    data: {\n      \"email\": username,\n      \"password\": password\n    }\n  }).then(handleResponse).then(user => {\n    localStorage.setItem('user', JSON.stringify(user.data));\n    dispatch(socketActions.connect());\n    return user;\n  });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem('user');\n}\n\nfunction getAll() {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users`, requestOptions).then(handleResponse);\n}\n\nfunction getById(id) {\n  const requestOptions = {\n    method: 'GET',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction register(user) {\n  // const requestOptions = {\n  //     method: 'POST',\n  //     headers: { 'Content-Type': 'application/json' },\n  //     body: JSON.stringify(user)\n  // };\n  return axios.post(`http://localhost:8000/api/users/signup`, user).then(handleResponse);\n}\n\nfunction updateUser(userId, userInfo) {\n  return axios({\n    method: 'patch',\n    url: `http://localhost:8000/api/users/${userId}`,\n    data: {\n      \"firstname\": userInfo.firstname,\n      \"lastname\": userInfo.lastname,\n      \"birthday\": userInfo.birthday,\n      \"address\": userInfo.address,\n      \"email\": userInfo.email\n    }\n  }).then(response => {\n    return response;\n  }, error => {\n    console.log(error);\n    return false;\n  });\n} // prefixed function name with underscore because delete is a reserved word in javascript\n\n\nfunction _delete(id) {\n  const requestOptions = {\n    method: 'DELETE',\n    headers: authHeader()\n  };\n  return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  if (!response.status === 200) {\n    if (response.status === 401) {\n      // auto logout if 401 response returned from api\n      logout();\n      window.location.reload(true);\n    }\n\n    const error = response.message;\n    return Promise.reject(error);\n  }\n\n  return response;\n}\n\nfunction changePassword(currentPassword, password, passwordConfirm) {\n  return axios({\n    method: 'patch',\n    url: 'http://localhost:8000/api/users/updatePassword',\n    data: {\n      \"currentPassword\": currentPassword,\n      \"password\": password,\n      \"passwordConfirm\": passwordConfirm\n    },\n    headers: authHeader()\n  }).then(response => {\n    console.log(response);\n\n    if (response.status === 200) {\n      return true;\n    }\n  }, error => {\n    console.log(error);\n    return false;\n  });\n}\n\nfunction getInfoUser(idUser) {\n  let header = authHeader();\n  let config = {\n    headers: header\n  };\n  return axios.get(`http://localhost:8000/api/users/${idUser}`, config).then(res => res).catch(error => console.log(error));\n}\n\nfunction follow(idUser) {\n  return axios({\n    method: 'post',\n    url: 'http://localhost:8000/api/users/followUser',\n    data: {\n      \"userId\": idUser\n    },\n    headers: authHeader()\n  }).then(response => {\n    return response;\n  }, error => {\n    console.log(error);\n  });\n}\n\nfunction changeProfilePicture(data) {\n  let config = {\n    headers: authHeader()\n  };\n  return axios.post('http://localhost:8000/api/users/changeProfilePicture', data, config);\n}\n\nfunction changeBackgroundPicture(data) {\n  let config = {\n    headers: authHeader()\n  };\n  return axios.post('http://localhost:8000/api/users/changeBackgroundPicture', data, config);\n}\n\nfunction getFollwer(userId) {\n  let config = {\n    headers: authHeader()\n  };\n  return axios.get('http://localhost:8000/api/users/followers/' + userId, config);\n}\n\nfunction getFollwing(userId) {\n  let config = {\n    headers: authHeader()\n  };\n  return axios.get('http://localhost:8000/api/users/followings/' + userId, config);\n}","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/services/user.service.js"],"names":["authHeader","axios","socketActions","userService","login","logout","register","getAll","getById","updateUser","delete","_delete","changePassword","getInfoUser","follow","changeProfilePicture","changeBackgroundPicture","getFollwer","getFollwing","username","password","method","url","data","then","handleResponse","user","localStorage","setItem","JSON","stringify","dispatch","connect","removeItem","requestOptions","headers","fetch","id","post","userId","userInfo","firstname","lastname","birthday","address","email","response","error","console","log","status","window","location","reload","message","Promise","reject","currentPassword","passwordConfirm","idUser","header","config","get","res","catch"],"mappings":"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","sourcesContent":["import { authHeader } from '../helpers/auth-header';\r\nimport axios from 'axios';\r\nimport { socketActions } from '../actions/socket.action';\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    updateUser,\r\n    delete: _delete,\r\n    changePassword,\r\n    getInfoUser,\r\n    follow,\r\n    changeProfilePicture,\r\n    changeBackgroundPicture,\r\n    getFollwer,\r\n    getFollwing\r\n};\r\n\r\nfunction login(username, password) {\r\n    return axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8000/api/users/login',\r\n        data: {\r\n            \"email\": username,\r\n            \"password\": password\r\n        }\r\n    })\r\n        .then(handleResponse)\r\n        .then((user) => {\r\n            localStorage.setItem('user', JSON.stringify(user.data));\r\n            dispatch(socketActions.connect());\r\n            return user;\r\n        })\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    // const requestOptions = {\r\n    //     method: 'POST',\r\n    //     headers: { 'Content-Type': 'application/json' },\r\n    //     body: JSON.stringify(user)\r\n    // };\r\n\r\n    return axios.post(`http://localhost:8000/api/users/signup`, user).then(handleResponse);\r\n}\r\n\r\nfunction updateUser(userId, userInfo) {\r\n    return axios({\r\n        method: 'patch',\r\n        url: `http://localhost:8000/api/users/${userId}`,\r\n        data: {\r\n            \"firstname\": userInfo.firstname,\r\n            \"lastname\": userInfo.lastname,\r\n            \"birthday\": userInfo.birthday,\r\n            \"address\": userInfo.address,\r\n            \"email\": userInfo.email\r\n        }\r\n    })\r\n        .then((response) => {\r\n            return response\r\n        }, (error) => {\r\n            console.log(error);\r\n            return false;\r\n        });\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`http://localhost:8000/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    if (!response.status === 200) {\r\n        if (response.status === 401) {\r\n            // auto logout if 401 response returned from api\r\n            logout();\r\n            window.location.reload(true);\r\n        }\r\n        const error = response.message;\r\n        return Promise.reject(error);\r\n    }\r\n    return response;\r\n}\r\n\r\nfunction changePassword(currentPassword, password, passwordConfirm) {\r\n\r\n    return axios({\r\n        method: 'patch',\r\n        url: 'http://localhost:8000/api/users/updatePassword',\r\n        data: {\r\n            \"currentPassword\": currentPassword,\r\n            \"password\": password,\r\n            \"passwordConfirm\": passwordConfirm\r\n        },\r\n        headers: authHeader()\r\n    })\r\n        .then((response) => {\r\n            console.log(response);\r\n            if (response.status === 200) {\r\n                return true;\r\n            }\r\n        }, (error) => {\r\n            console.log(error);\r\n            return false;\r\n        });\r\n\r\n}\r\n\r\nfunction getInfoUser(idUser) {\r\n    let header = authHeader();\r\n    let config = {\r\n        headers: header\r\n    }\r\n    return axios.get(`http://localhost:8000/api/users/${idUser}`, config)\r\n        .then(res =>\r\n            res\r\n        )\r\n        .catch(error => console.log(error));\r\n\r\n}\r\nfunction follow(idUser) {\r\n    return axios({\r\n        method: 'post',\r\n        url: 'http://localhost:8000/api/users/followUser',\r\n        data: {\r\n            \"userId\": idUser,\r\n        },\r\n        headers: authHeader()\r\n    })\r\n        .then((response) => {\r\n            return response;\r\n        }, (error) => {\r\n            console.log(error);\r\n        });\r\n}\r\nfunction changeProfilePicture(data) {\r\n    let config={\r\n        headers: authHeader()\r\n    }\r\n    return axios.post('http://localhost:8000/api/users/changeProfilePicture',data,config);\r\n}\r\n\r\nfunction changeBackgroundPicture(data) {\r\n    let config={\r\n        headers: authHeader()\r\n    }\r\n    return axios.post('http://localhost:8000/api/users/changeBackgroundPicture',data,config);\r\n}\r\n\r\nfunction getFollwer(userId) {\r\n    let config={\r\n        headers: authHeader()\r\n    }\r\n    return axios.get('http://localhost:8000/api/users/followers/'+userId,config);\r\n}\r\n\r\nfunction getFollwing(userId) {\r\n    let config={\r\n        headers: authHeader()\r\n    }\r\n    return axios.get('http://localhost:8000/api/users/followings/'+userId,config);\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}