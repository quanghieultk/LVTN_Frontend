{"ast":null,"code":"var _jsxFileName = \"D:\\\\LVTN\\\\LVTN\\\\cuisine-net\\\\src\\\\components\\\\commentPost\\\\CommentPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { Fragment, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport { commentService } from './../../services/comment.service';\nimport { Comment } from 'antd';\nimport { CommentChildren } from './CommentChildren';\nimport axios from 'axios';\nimport { MessageInput, Avatar } from \"@chatscope/chat-ui-kit-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    backgroundColor: red[500]\n  }\n}));\nexport function CommentPost(props) {\n  _s();\n\n  var idPost = props.idPost; //comment\n\n  const [dataComment, setDataComment] = useState([]);\n  let mounted = true;\n  useEffect(() => {\n    commentService.getAllCommentPost(idPost).then(items => {\n      console.log(items);\n\n      if (mounted) {\n        mounted = false;\n        setDataComment(items);\n      }\n    });\n    return () => mounted = false;\n  }, []);\n  const [messageInputValue, setMessageInputValue] = useState(\"\");\n\n  const sendMessage = messageInputValue => {\n    let userId = JSON.parse(localStorage.getItem('user'))._id;\n\n    let authorId = props.authorId;\n    commentService.createComment(idPost, messageInputValue, userId, authorId);\n    setMessageInputValue(\"\");\n    commentService.getAllCommentPost(idPost).then(items => {\n      if (mounted) {\n        mounted = false;\n        setDataComment(items);\n      }\n    });\n    return () => mounted = false;\n  };\n\n  const [isShowCommentReplyTo, setIsShowCommentReplyTo] = useState(false);\n  const [idCommentParent, setIdCommentParent] = useState();\n\n  const handleReplyTo = value => {\n    setIsShowCommentReplyTo(true);\n    setIdCommentParent(value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(MessageInput, {\n      onChange: val => setMessageInputValue(val),\n      onSend: messageInputValue => sendMessage(messageInputValue)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), dataComment ? dataComment.map(value => {\n      return /*#__PURE__*/_jsxDEV(Comment, {\n        actions: [/*#__PURE__*/_jsxDEV(\"span\", {\n          onClick: () => handleReplyTo(value._id),\n          children: \"Reply to\"\n        }, \"comment-nested-reply-to\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 35\n        }, this)],\n        author: /*#__PURE__*/_jsxDEV(\"a\", {\n          children: value.author.firstname + value.author.lastname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 33\n        }, this),\n        avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n          src: value.photo,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }, this),\n        content: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: value.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(CommentChildren, {\n          idComment: value._id,\n          isShowInput: isShowCommentReplyTo && idCommentParent == value._id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 28\n      }, this);\n    }) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CommentPost, \"5tsgY7difY9tDG5kY/FMsANFkHc=\");\n\n_c = CommentPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentPost\");","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/components/commentPost/CommentPost.js"],"names":["React","Fragment","useEffect","useState","makeStyles","Typography","red","commentService","Comment","CommentChildren","axios","MessageInput","Avatar","useStyles","theme","avatar","backgroundColor","CommentPost","props","idPost","dataComment","setDataComment","mounted","getAllCommentPost","then","items","console","log","messageInputValue","setMessageInputValue","sendMessage","userId","JSON","parse","localStorage","getItem","_id","authorId","createComment","isShowCommentReplyTo","setIsShowCommentReplyTo","idCommentParent","setIdCommentParent","handleReplyTo","value","val","map","author","firstname","lastname","photo","text"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport { commentService } from './../../services/comment.service';\r\nimport { Comment } from 'antd';\r\nimport { CommentChildren } from './CommentChildren'\r\nimport axios from 'axios';\r\nimport {\r\n    MessageInput,\r\n    Avatar\r\n} from \"@chatscope/chat-ui-kit-react\";\r\nconst useStyles = makeStyles((theme) => ({\r\n    avatar: {\r\n        backgroundColor: red[500],\r\n    },\r\n}));\r\n\r\nexport function CommentPost(props) {\r\n    var idPost = props.idPost;\r\n    //comment\r\n    const [dataComment, setDataComment] = useState([]);\r\n    let mounted = true;\r\n    useEffect(() => {\r\n        commentService.getAllCommentPost(idPost)\r\n            .then(items => {\r\n                console.log(items)\r\n                if (mounted) {\r\n                    mounted = false;\r\n                    setDataComment(items);\r\n                }\r\n\r\n            })\r\n        return () => mounted = false;\r\n    }, []);\r\n    const [messageInputValue, setMessageInputValue] = useState(\"\");\r\n    const sendMessage = (messageInputValue) => {\r\n        let userId=JSON.parse(localStorage.getItem('user'))._id;\r\n        let authorId=props.authorId\r\n        commentService.createComment(idPost, messageInputValue,userId,authorId);\r\n\r\n        setMessageInputValue(\"\");\r\n        commentService.getAllCommentPost(idPost)\r\n            .then(items => {\r\n                if (mounted) {\r\n                    mounted = false;\r\n                    setDataComment(items);\r\n                }\r\n\r\n            })\r\n        return () => mounted = false;\r\n    };\r\n    \r\n    const [isShowCommentReplyTo, setIsShowCommentReplyTo] = useState(false);\r\n    const [idCommentParent, setIdCommentParent] = useState();\r\n    const handleReplyTo = (value) => {\r\n        setIsShowCommentReplyTo(true);\r\n        setIdCommentParent(value);\r\n    };\r\n    \r\n    return (\r\n        <div>\r\n            <MessageInput onChange={val => setMessageInputValue(val)}\r\n                onSend={(messageInputValue) => sendMessage(messageInputValue)} />\r\n            {\r\n                dataComment?dataComment.map((value) => {\r\n                    return <Comment\r\n                        actions={[<span key=\"comment-nested-reply-to\" onClick={() => handleReplyTo(value._id)} >Reply to</span>]}\r\n                        author={<a>{value.author.firstname+ value.author.lastname}</a>}\r\n                        avatar={\r\n                            <Avatar\r\n                                src={value.photo}\r\n                                alt=\"\"\r\n                            />\r\n                        }\r\n                        content={\r\n                            <p>\r\n                                {value.text}\r\n                            </p>\r\n                        }\r\n                    >\r\n                        <CommentChildren idComment={value._id} isShowInput = {isShowCommentReplyTo&&idCommentParent == value._id}></CommentChildren>\r\n                    </Comment>\r\n                }):null\r\n            }\r\n        </div>\r\n\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}