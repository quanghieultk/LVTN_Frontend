{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nimport { withParameters } from '@luma.gl/gltools';\n\nvar Display = function () {\n  function Display() {\n    _classCallCheck(this, Display);\n\n    this.animationLoop = null;\n  }\n\n  _createClass(Display, [{\n    key: \"getViews\",\n    value: function getViews(options) {\n      var width = options.width,\n          height = options.height;\n      return [{\n        params: {\n          viewport: [0, 0, width, height],\n          scissor: [0, 0, width, height],\n          scissorTest: true\n        }\n      }];\n    }\n  }, {\n    key: \"submitFrame\",\n    value: function submitFrame() {\n      return true;\n    }\n  }, {\n    key: \"requestAnimationFrame\",\n    value: function requestAnimationFrame(renderFrame) {\n      return false;\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete() {}\n  }, {\n    key: \"_renderFrame\",\n    value: function _renderFrame(options) {\n      var _this = this;\n\n      var views = this.getViews(options);\n\n      if (!views) {\n        return false;\n      }\n\n      var gl = this.animationLoop.gl;\n\n      var _iterator = _createForOfIteratorHelper(views),\n          _step;\n\n      try {\n        var _loop = function _loop() {\n          var view = _step.value;\n          withParameters(gl, view.params, function () {\n            return _this.animationLoop.onRender(_objectSpread(_objectSpread({}, options), view));\n          });\n        };\n\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      this.submitFrame();\n      return true;\n    }\n  }]);\n\n  return Display;\n}();\n\nexport { Display as default };","map":{"version":3,"sources":["../../../src/webvr/display.js"],"names":["Display","options","width","height","params","viewport","scissor","scissorTest","renderFrame","views","gl","view","withParameters"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAAA,cAAA,QAAA,kBAAA;;IAEqBA,O;AACnB,WAAA,OAAA,GAAc;AAAA,IAAA,eAAA,CAAA,IAAA,EAAA,OAAA,CAAA;;AAEZ,SAAA,aAAA,GAAA,IAAA;AACD;;;;6BAEQC,O,EAAS;AAAA,UACTC,KADS,GACQD,OADR,CAAA,KAAA;AAAA,UACFE,MADE,GACQF,OADR,CAAA,MAAA;AAEhB,aAAO,CACL;AACEG,QAAAA,MAAM,EAAE;AACNC,UAAAA,QAAQ,EAAE,CAAA,CAAA,EAAA,CAAA,EAAA,KAAA,EADJ,MACI,CADJ;AAENC,UAAAA,OAAO,EAAE,CAAA,CAAA,EAAA,CAAA,EAAA,KAAA,EAFH,MAEG,CAFH;AAGNC,UAAAA,WAAW,EAAE;AAHP;AADV,OADK,CAAP;AASD;;;kCAEa;AACZ,aAAA,IAAA;AACD;;;0CAGqBC,W,EAAa;AACjC,aAAA,KAAA;AACD;;;8BAEQ,CAAE;;;iCAGEP,O,EAAS;AAAA,UAAA,KAAA,GAAA,IAAA;;AACpB,UAAMQ,KAAK,GAAG,KAAA,QAAA,CAAd,OAAc,CAAd;;AACA,UAAI,CAAJ,KAAA,EAAY;AACV,eAAA,KAAA;AACD;;AAJmB,UAMbC,EANa,GAMP,KANO,aAMP,CANO,EAAA;;AAAA,UAAA,SAAA,GAAA,0BAAA,CAAA,KAAA,CAAA;AAAA,UAAA,KAAA;;AAAA,UAAA;AAAA,YAAA,KAAA,GAAA,SAAA,KAAA,GAAA;AAAA,cAOTC,IAPS,GAAA,KAAA,CAAA,KAAA;AAQlBC,UAAAA,cAAc,CAAA,EAAA,EAAKD,IAAI,CAAT,MAAA,EAAkB,YAAA;AAAA,mBAAM,KAAI,CAAJ,aAAA,CAAA,QAAA,CAAA,aAAA,CAAA,aAAA,CAAA,EAAA,EAAA,OAAA,CAAA,EAAN,IAAM,CAAA,CAAN;AAAhCC,WAAc,CAAdA;AARkB,SAAA;;AAOpB,aAAA,SAAA,CAAA,CAAA,EAAA,EAAA,CAAA,CAAA,KAAA,GAAA,SAAA,CAAA,CAAA,EAAA,EAAA,IAAA,GAA0B;AAAA,UAAA,KAAA;AAEzB;AATmB,OAAA,CAAA,OAAA,GAAA,EAAA;AAAA,QAAA,SAAA,CAAA,CAAA,CAAA,GAAA;AAAA,OAAA,SAAA;AAAA,QAAA,SAAA,CAAA,CAAA;AAAA;;AAWpB,WAAA,WAAA;AACA,aAAA,IAAA;AACD;;;;;;SA5CkBZ,O","sourcesContent":["import {withParameters} from '@luma.gl/gltools';\n\nexport default class Display {\n  constructor() {\n    // TODO\n    this.animationLoop = null;\n  }\n\n  getViews(options) {\n    const {width, height} = options;\n    return [\n      {\n        params: {\n          viewport: [0, 0, width, height],\n          scissor: [0, 0, width, height],\n          scissorTest: true\n        }\n      }\n    ];\n  }\n\n  submitFrame() {\n    return true;\n  }\n\n  // return true if animation frame has been requested\n  requestAnimationFrame(renderFrame) {\n    return false;\n  }\n\n  delete() {}\n\n  // AnimationLoop calls this API\n  _renderFrame(options) {\n    const views = this.getViews(options);\n    if (!views) {\n      return false;\n    }\n\n    const {gl} = this.animationLoop;\n    for (const view of views) {\n      withParameters(gl, view.params, () => this.animationLoop.onRender({...options, ...view}));\n    }\n\n    this.submitFrame();\n    return true;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}