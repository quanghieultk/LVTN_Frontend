{"ast":null,"code":"import { chatConstants } from '../constants/chat.constants';\nexport const chatAction = {\n  typing,\n  stoppedTyping,\n  changeRoom,\n  getChatRooms,\n  getMessagesForRoom,\n  sendMessage,\n  sendImage,\n  newMessage,\n  readMessages,\n  changeActivityStatus,\n  imageMessageRequest,\n  call,\n  answer,\n  endCall,\n  endAnsweringCall,\n  searchUsers\n};\n\nfunction typing(roomId) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.TYPING,\n      roomId\n    });\n  };\n}\n\nfunction stoppedTyping(roomId) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.STOPPED_TYPING,\n      roomId\n    });\n  };\n}\n\nfunction initiateMessageArray(roomId) {\n  return {\n    type: chatConstants.INIT_MESSAGE_ARRAY,\n    roomId\n  };\n}\n\nfunction changeRoom(room) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.CHANGE_ROOM,\n      room\n    });\n  };\n}\n\nfunction readMessages(params) {\n  const {\n    messageIds,\n    roomId\n  } = params;\n  return dispatch => {\n    dispatch(read(messageIds, roomId));\n    chatService.readMessages(params).then(() => {}, error => {\n      console.log(error);\n    });\n  };\n\n  function read(messageIds, roomId) {\n    return {\n      type: chatConstants.READ_MESSAGES,\n      messageIds,\n      roomId\n    };\n  }\n}\n\nfunction sendMessage(message) {\n  return dispatch => {\n    dispatch(request({ ...message,\n      sent: false\n    }));\n    chatService.sendMessage(message).then(response => {\n      dispatch(success(response.message));\n    }, error => {\n      console.log(error);\n    });\n  };\n\n  function request(message) {\n    return {\n      type: chatConstants.SEND_MESSAGE_REQUEST,\n      message\n    };\n  }\n\n  function success(message) {\n    return {\n      type: chatConstants.SEND_MESSAGE_SUCCESS,\n      message\n    };\n  }\n}\n\nfunction getChatRooms() {\n  return dispatch => {\n    dispatch(request());\n    chatService.getChatRooms().then(response => {\n      dispatch(success(response.rooms));\n      response.rooms.forEach(room => dispatch(initiateMessageArray(room._id)));\n    }, error => {\n      console.log(error);\n    });\n  };\n\n  function request() {\n    return {\n      type: chatConstants.GET_ROOMS_REQUEST\n    };\n  }\n\n  function success(rooms) {\n    return {\n      type: chatConstants.GET_ROOMS_SUCCESS,\n      rooms\n    };\n  }\n}\n\nfunction changeActivityStatus(user) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.CHANGE_ACTIVITY_STATUS,\n      user\n    });\n  };\n}\n\nfunction getMessagesForRoom(room) {\n  return dispatch => {\n    if (room.initialFetch) {\n      dispatch(initialRequest(room._id));\n    } else {\n      dispatch(request(room._id));\n    }\n\n    chatService.getMessagesForRoom(room).then(response => {\n      dispatch(success({\n        messages: response.messages.reverse(),\n        roomId: room._id\n      }));\n    }, error => {\n      console.log(error);\n    });\n  };\n\n  function request(roomId) {\n    return {\n      type: chatConstants.GET_MESSAGES_REQUEST,\n      roomId\n    };\n  }\n\n  function initialRequest(roomId) {\n    return {\n      type: chatConstants.GET_MESSAGES_INITIAL_REQUEST,\n      roomId\n    };\n  }\n\n  function success(data) {\n    return {\n      type: chatConstants.GET_MESSAGES_SUCCESS,\n      data\n    };\n  }\n}\n\nfunction sendImage(data, message) {\n  return dispatch => {\n    dispatch(request({ ...message,\n      sent: false\n    }));\n    chatService.sendImage(data).then(response => {\n      dispatch(success(response.message));\n    }, error => {\n      console.log(error);\n    });\n  };\n\n  function request(message) {\n    return {\n      type: chatConstants.SEND_MESSAGE_REQUEST,\n      message\n    };\n  }\n\n  function success(message) {\n    return {\n      type: chatConstants.SEND_MESSAGE_SUCCESS,\n      message\n    };\n  }\n}\n\nfunction newMessage(message) {\n  return dispatch => {\n    dispatch(success(message));\n    dispatch({\n      type: chatConstants.INC_MESSAGE_COUNT\n    });\n  };\n\n  function success(message) {\n    return {\n      type: chatConstants.NEW_MESSAGE,\n      message\n    };\n  }\n}\n\nfunction imageMessageRequest(message) {\n  return dispatch => {\n    dispatch(success(message));\n  };\n\n  function success(message) {\n    return {\n      type: chatConstants.NEW_IMAGE_MESSAGE_REQUEST,\n      message\n    };\n  }\n}\n\nfunction call(data) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.OPEN_CALLING_MODAL\n    });\n    chatService.call(data).then(() => {}, error => {\n      console.log(error);\n    });\n  };\n}\n\nfunction answer(data) {\n  return dispatch => {\n    chatService.answer(data).then(() => {}, error => {\n      console.log(error);\n    });\n  };\n}\n\nfunction endCall() {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.CLOSE_CALLING_MODAL\n    });\n  };\n}\n\nfunction endAnsweringCall() {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.CLOSE_ANSWERING_MODAL\n    });\n  };\n}\n\nfunction searchUsers(rooms) {\n  return dispatch => {\n    dispatch({\n      type: chatConstants.SEARCH_USERS,\n      rooms\n    });\n  };\n}","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/src/actions/chat.action.js"],"names":["chatConstants","chatAction","typing","stoppedTyping","changeRoom","getChatRooms","getMessagesForRoom","sendMessage","sendImage","newMessage","readMessages","changeActivityStatus","imageMessageRequest","call","answer","endCall","endAnsweringCall","searchUsers","roomId","dispatch","type","TYPING","STOPPED_TYPING","initiateMessageArray","INIT_MESSAGE_ARRAY","room","CHANGE_ROOM","params","messageIds","read","chatService","then","error","console","log","READ_MESSAGES","message","request","sent","response","success","SEND_MESSAGE_REQUEST","SEND_MESSAGE_SUCCESS","rooms","forEach","_id","GET_ROOMS_REQUEST","GET_ROOMS_SUCCESS","user","CHANGE_ACTIVITY_STATUS","initialFetch","initialRequest","messages","reverse","GET_MESSAGES_REQUEST","GET_MESSAGES_INITIAL_REQUEST","data","GET_MESSAGES_SUCCESS","INC_MESSAGE_COUNT","NEW_MESSAGE","NEW_IMAGE_MESSAGE_REQUEST","OPEN_CALLING_MODAL","CLOSE_CALLING_MODAL","CLOSE_ANSWERING_MODAL","SEARCH_USERS"],"mappings":"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","sourcesContent":["import { chatConstants } from '../constants/chat.constants'\r\n\r\nexport const chatAction = {\r\n    typing,\r\n    stoppedTyping,\r\n    changeRoom,\r\n    getChatRooms,\r\n    getMessagesForRoom,\r\n    sendMessage,\r\n    sendImage,\r\n    newMessage,\r\n    readMessages,\r\n    changeActivityStatus,\r\n    imageMessageRequest,\r\n    call,\r\n    answer,\r\n    endCall,\r\n    endAnsweringCall,\r\n    searchUsers\r\n}\r\n\r\n\r\nfunction typing(roomId) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.TYPING, roomId });\r\n    };\r\n}\r\n\r\nfunction stoppedTyping(roomId) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.STOPPED_TYPING, roomId });\r\n    };\r\n}\r\nfunction initiateMessageArray(roomId) {\r\n    return { type: chatConstants.INIT_MESSAGE_ARRAY, roomId };\r\n}\r\n\r\nfunction changeRoom(room) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.CHANGE_ROOM, room })\r\n    }\r\n}\r\n\r\n\r\nfunction readMessages(params) {\r\n    const { messageIds, roomId } = params;\r\n    return dispatch => {\r\n        dispatch(read(messageIds, roomId));\r\n        chatService.readMessages(params).then(\r\n            () => { },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n    function read(messageIds, roomId) {\r\n        return { type: chatConstants.READ_MESSAGES, messageIds, roomId };\r\n    }\r\n}\r\n\r\nfunction sendMessage(message) {\r\n    return dispatch => {\r\n        dispatch(request({ ...message, sent: false }));\r\n\r\n        chatService.sendMessage(message).then(\r\n            response => {\r\n                dispatch(success(response.message));\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n\r\n    function request(message) {\r\n        return { type: chatConstants.SEND_MESSAGE_REQUEST, message };\r\n    }\r\n\r\n    function success(message) {\r\n        return { type: chatConstants.SEND_MESSAGE_SUCCESS, message };\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction getChatRooms() {\r\n    return dispatch => {\r\n        dispatch(request());\r\n\r\n        chatService.getChatRooms().then(\r\n            response => {\r\n                dispatch(success(response.rooms));\r\n\r\n                response.rooms.forEach(room =>\r\n                    dispatch(initiateMessageArray(room._id))\r\n                );\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n    function request() {\r\n        return { type: chatConstants.GET_ROOMS_REQUEST };\r\n    }\r\n    function success(rooms) {\r\n        return { type: chatConstants.GET_ROOMS_SUCCESS, rooms };\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction changeActivityStatus(user) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.CHANGE_ACTIVITY_STATUS, user });\r\n    };\r\n}\r\n\r\n\r\nfunction getMessagesForRoom(room) {\r\n    return dispatch => {\r\n        if (room.initialFetch) {\r\n            dispatch(initialRequest(room._id));\r\n        } else {\r\n            dispatch(request(room._id));\r\n        }\r\n        chatService.getMessagesForRoom(room).then(\r\n            response => {\r\n                dispatch(\r\n                    success({ messages: response.messages.reverse(), roomId: room._id })\r\n                );\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n    function request(roomId) {\r\n        return { type: chatConstants.GET_MESSAGES_REQUEST, roomId };\r\n    }\r\n    function initialRequest(roomId) {\r\n        return { type: chatConstants.GET_MESSAGES_INITIAL_REQUEST, roomId };\r\n    }\r\n    function success(data) {\r\n        return { type: chatConstants.GET_MESSAGES_SUCCESS, data };\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction sendImage(data, message) {\r\n    return dispatch => {\r\n        dispatch(request({ ...message, sent: false }));\r\n\r\n        chatService.sendImage(data).then(\r\n            response => {\r\n                dispatch(success(response.message));\r\n            },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n    function request(message) {\r\n        return { type: chatConstants.SEND_MESSAGE_REQUEST, message };\r\n    }\r\n    function success(message) {\r\n        return { type: chatConstants.SEND_MESSAGE_SUCCESS, message };\r\n    }\r\n}\r\n\r\nfunction newMessage(message) {\r\n    return dispatch => {\r\n        dispatch(success(message));\r\n        dispatch({ type: chatConstants.INC_MESSAGE_COUNT });\r\n    };\r\n    function success(message) {\r\n        return { type: chatConstants.NEW_MESSAGE, message };\r\n    }\r\n}\r\n\r\nfunction imageMessageRequest(message) {\r\n    return dispatch => {\r\n        dispatch(success(message));\r\n    };\r\n    function success(message) {\r\n        return { type: chatConstants.NEW_IMAGE_MESSAGE_REQUEST, message };\r\n    }\r\n}\r\n\r\nfunction call(data) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.OPEN_CALLING_MODAL });\r\n\r\n        chatService.call(data).then(\r\n            () => { },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n}\r\n\r\nfunction answer(data) {\r\n    return dispatch => {\r\n        chatService.answer(data).then(\r\n            () => { },\r\n            error => {\r\n                console.log(error);\r\n            }\r\n        );\r\n    };\r\n}\r\n\r\nfunction endCall() {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.CLOSE_CALLING_MODAL });\r\n    };\r\n}\r\n\r\nfunction endAnsweringCall() {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.CLOSE_ANSWERING_MODAL });\r\n    };\r\n}\r\n\r\nfunction searchUsers(rooms) {\r\n    return dispatch => {\r\n        dispatch({ type: chatConstants.SEARCH_USERS, rooms });\r\n    };\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}