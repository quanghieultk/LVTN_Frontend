{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios2 = require('axios');\n\nvar _axios3 = _interopRequireDefault(_axios2);\n\nvar _AxiosProvider = require('./AxiosProvider');\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Request = function (_React$Component) {\n  _inherits(Request, _React$Component);\n\n  function Request(props) {\n    _classCallCheck(this, Request);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = {\n      isLoading: false,\n      response: null,\n      error: null // create debounce function\n\n    };\n\n    _this.setupDebounce(props);\n\n    return _this;\n  }\n\n  Request.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var newProps = this.props;\n\n    if (prevProps.debounce !== newProps.debounce) {\n      this.setupDebounce(newProps);\n    } // quick and dirty prop compare\n\n\n    var oldPropStr = JSON.stringify(prevProps);\n    var newPropStr = JSON.stringify(newProps);\n\n    if (oldPropStr != newPropStr && newProps.isReady) {\n      this.debounceMakeRequest(newProps, this.getConfig(newProps));\n    }\n\n    return null;\n  };\n\n  Request.prototype.componentDidMount = function componentDidMount() {\n    this._mounted = true;\n\n    if (this.props.isReady) {\n      this.debounceMakeRequest(this.props, this.getConfig(this.props));\n    }\n  };\n\n  Request.prototype.onMakeReload = function onMakeReload(props) {\n    this.debounceMakeRequest(props || this.props, this.getConfig(props ? Object.assign({}, this.props, props) : this.props));\n  };\n\n  Request.prototype.componentWillUnmount = function componentWillUnmount() {\n    this._mounted = false;\n\n    if (this.source && typeof this.source.cancel === 'function') {\n      this.source.cancel('Canceling last request.');\n    }\n  };\n\n  Request.prototype.setupDebounce = function setupDebounce(props) {\n    this.debounceMakeRequest = (0, _utils.debounce)(this.makeRequest, props.debounce, props.debounceImmediate);\n  };\n\n  Request.prototype.getConfig = function getConfig(props) {\n    return Object.assign({\n      url: props.url,\n      method: props.method,\n      data: props.data,\n      params: props.params\n    }, props.config);\n  };\n\n  Request.prototype.makeRequest = function makeRequest(props, config) {\n    var _this2 = this;\n\n    var _axios = props.instance || this.context || _axios3.default;\n\n    if (!this._mounted || config.url === undefined) {\n      return;\n    } // setup cancel tokens\n\n\n    if (this.source) {\n      this.source.cancel('Canceling previous request.');\n    }\n\n    this.source = _axios3.default.CancelToken.source(); // set the isLoading flag\n\n    this.setState({\n      isLoading: true,\n      error: null\n    });\n\n    if (typeof props.onLoading === 'function') {\n      props.onLoading();\n    } // time to make the axios request\n\n\n    _axios.request(Object.assign({\n      cancelToken: this.source.token\n    }, config)).then(function (res) {\n      if (!_this2._mounted) {\n        return;\n      }\n\n      _this2.setState({\n        isLoading: false,\n        response: res\n      });\n\n      if (typeof props.onSuccess === 'function') {\n        props.onSuccess(res);\n      }\n    }, function (err) {\n      if (!_this2._mounted) {\n        return;\n      }\n\n      if (!_axios3.default.isCancel(err)) {\n        _this2.setState({\n          isLoading: false,\n          response: err.response,\n          error: err\n        });\n\n        if (typeof props.onError === 'function') {\n          props.onError(err);\n        }\n      }\n    });\n  };\n\n  Request.prototype.render = function render() {\n    var _this3 = this;\n\n    if (typeof this.props.children === 'function') {\n      var _axios = this.props.instance || this.context || _axios3.default;\n\n      return this.props.children(this.state.error, this.state.response, this.state.isLoading, function (props) {\n        return _this3.onMakeReload(props);\n      }, _axios);\n    }\n\n    return null;\n  };\n\n  return Request;\n}(_react2.default.Component);\n\nRequest.contextType = _AxiosProvider.AxiosContext;\nRequest.defaultProps = {\n  url: undefined,\n  method: 'get',\n  data: {},\n  config: {},\n  debounce: 200,\n  debounceImmediate: true,\n  isReady: true\n};\nRequest.propTypes = {\n  instance: _propTypes2.default.func,\n  url: _propTypes2.default.string,\n  method: _propTypes2.default.oneOf(['get', 'delete', 'head', 'post', 'put', 'patch', 'options']).isRequired,\n  data: _propTypes2.default.object,\n  params: _propTypes2.default.object,\n  config: _propTypes2.default.object,\n  isReady: _propTypes2.default.bool,\n  debounce: _propTypes2.default.number,\n  debounceImmediate: _propTypes2.default.bool,\n  onSuccess: _propTypes2.default.func,\n  onLoading: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  children: _propTypes2.default.func\n};\nexports.default = Request;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["D:/LVTN/LVTN/cuisine-net/node_modules/react-axios/lib/components/Request.js"],"names":["exports","__esModule","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_axios2","_axios3","_AxiosProvider","_utils","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","Request","_React$Component","props","_this","state","isLoading","response","error","setupDebounce","componentDidUpdate","prevProps","newProps","debounce","oldPropStr","JSON","stringify","newPropStr","isReady","debounceMakeRequest","getConfig","componentDidMount","_mounted","onMakeReload","assign","componentWillUnmount","source","cancel","makeRequest","debounceImmediate","url","method","data","params","config","_this2","_axios","context","undefined","CancelToken","setState","onLoading","request","cancelToken","token","then","res","onSuccess","err","isCancel","onError","render","_this3","children","Component","contextType","AxiosContext","defaultProps","propTypes","func","string","oneOf","isRequired","object","bool","number","module"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _axios2 = require('axios');\n\nvar _axios3 = _interopRequireDefault(_axios2);\n\nvar _AxiosProvider = require('./AxiosProvider');\n\nvar _utils = require('../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Request = function (_React$Component) {\n  _inherits(Request, _React$Component);\n\n  function Request(props) {\n    _classCallCheck(this, Request);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\n    _this.state = {\n      isLoading: false,\n      response: null,\n      error: null\n      // create debounce function\n    };_this.setupDebounce(props);\n    return _this;\n  }\n\n  Request.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var newProps = this.props;\n    if (prevProps.debounce !== newProps.debounce) {\n      this.setupDebounce(newProps);\n    }\n\n    // quick and dirty prop compare\n    var oldPropStr = JSON.stringify(prevProps);\n    var newPropStr = JSON.stringify(newProps);\n    if (oldPropStr != newPropStr && newProps.isReady) {\n      this.debounceMakeRequest(newProps, this.getConfig(newProps));\n    }\n    return null;\n  };\n\n  Request.prototype.componentDidMount = function componentDidMount() {\n    this._mounted = true;\n    if (this.props.isReady) {\n      this.debounceMakeRequest(this.props, this.getConfig(this.props));\n    }\n  };\n\n  Request.prototype.onMakeReload = function onMakeReload(props) {\n    this.debounceMakeRequest(props || this.props, this.getConfig(props ? Object.assign({}, this.props, props) : this.props));\n  };\n\n  Request.prototype.componentWillUnmount = function componentWillUnmount() {\n    this._mounted = false;\n    if (this.source && typeof this.source.cancel === 'function') {\n      this.source.cancel('Canceling last request.');\n    }\n  };\n\n  Request.prototype.setupDebounce = function setupDebounce(props) {\n    this.debounceMakeRequest = (0, _utils.debounce)(this.makeRequest, props.debounce, props.debounceImmediate);\n  };\n\n  Request.prototype.getConfig = function getConfig(props) {\n    return Object.assign({ url: props.url, method: props.method, data: props.data, params: props.params }, props.config);\n  };\n\n  Request.prototype.makeRequest = function makeRequest(props, config) {\n    var _this2 = this;\n\n    var _axios = props.instance || this.context || _axios3.default;\n    if (!this._mounted || config.url === undefined) {\n      return;\n    }\n    // setup cancel tokens\n    if (this.source) {\n      this.source.cancel('Canceling previous request.');\n    }\n    this.source = _axios3.default.CancelToken.source();\n\n    // set the isLoading flag\n    this.setState({ isLoading: true, error: null });\n    if (typeof props.onLoading === 'function') {\n      props.onLoading();\n    }\n\n    // time to make the axios request\n    _axios.request(Object.assign({ cancelToken: this.source.token }, config)).then(function (res) {\n      if (!_this2._mounted) {\n        return;\n      }\n      _this2.setState({ isLoading: false, response: res });\n      if (typeof props.onSuccess === 'function') {\n        props.onSuccess(res);\n      }\n    }, function (err) {\n      if (!_this2._mounted) {\n        return;\n      }\n      if (!_axios3.default.isCancel(err)) {\n        _this2.setState({ isLoading: false, response: err.response, error: err });\n        if (typeof props.onError === 'function') {\n          props.onError(err);\n        }\n      }\n    });\n  };\n\n  Request.prototype.render = function render() {\n    var _this3 = this;\n\n    if (typeof this.props.children === 'function') {\n      var _axios = this.props.instance || this.context || _axios3.default;\n      return this.props.children(this.state.error, this.state.response, this.state.isLoading, function (props) {\n        return _this3.onMakeReload(props);\n      }, _axios);\n    }\n    return null;\n  };\n\n  return Request;\n}(_react2.default.Component);\n\nRequest.contextType = _AxiosProvider.AxiosContext;\n\nRequest.defaultProps = {\n  url: undefined,\n  method: 'get',\n  data: {},\n  config: {},\n  debounce: 200,\n  debounceImmediate: true,\n  isReady: true\n};\n\nRequest.propTypes = {\n  instance: _propTypes2.default.func,\n  url: _propTypes2.default.string,\n  method: _propTypes2.default.oneOf(['get', 'delete', 'head', 'post', 'put', 'patch', 'options']).isRequired,\n  data: _propTypes2.default.object,\n  params: _propTypes2.default.object,\n  config: _propTypes2.default.object,\n  isReady: _propTypes2.default.bool,\n  debounce: _propTypes2.default.number,\n  debounceImmediate: _propTypes2.default.bool,\n  onSuccess: _propTypes2.default.func,\n  onLoading: _propTypes2.default.func,\n  onError: _propTypes2.default.func,\n  children: _propTypes2.default.func\n};\n\nexports.default = Request;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}